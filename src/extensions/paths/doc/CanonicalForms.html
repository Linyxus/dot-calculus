<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="assets/resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="assets/resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="assets/resources/config.js"></script>
<script type="text/javascript" src="assets/resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../README.html">README</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">CanonicalForms</h1>

<div class="code">

<br/>
</div>

<div class="doc">
This module proves the Canonical Forms Lemmas, which allow us
    to retrieve the shape of a value given its type. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Coq.Program.Equality</span> <span class="id" title="library">List</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">LibLN</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Binding.html#"><span class="id" title="library">Binding</span></a> <a class="idref" href="Definitions.html#"><span class="id" title="library">Definitions</span></a> <a class="idref" href="GeneralToTight.html#"><span class="id" title="library">GeneralToTight</span></a> <a class="idref" href="InvertibleTyping.html#"><span class="id" title="library">InvertibleTyping</span></a> <a class="idref" href="Narrowing.html#"><span class="id" title="library">Narrowing</span></a> <a class="idref" href="PreciseTyping.html#"><span class="id" title="library">PreciseTyping</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="RecordAndInertTypes.html#"><span class="id" title="library">RecordAndInertTypes</span></a> <a class="idref" href="Substitution.html#"><span class="id" title="library">Substitution</span></a> <a class="idref" href="Subenvironments.html#"><span class="id" title="library">Subenvironments</span></a> <a class="idref" href="TightTyping.html#"><span class="id" title="library">TightTyping</span></a> <a class="idref" href="Weakening.html#"><span class="id" title="library">Weakening</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab54"></a><h1 class="section">Well-typedness</h1>

<div class="paragraph"> </div>

 If <span class="inlinecode"><span class="id" title="var">e</span>:</span> <span class="inlinecode"><span class="id" title="var">G</span></span>, the variables in the domain of <span class="inlinecode"><span class="id" title="var">e</span></span> are distinct. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="well_typed_to_ok_G"><span class="id" title="lemma">well_typed_to_ok_G</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">s</span> <span class="id" title="var">G</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#well_typed"><span class="id" title="inductive">well_typed</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="inductive">ok</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="var">jauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">well_typed_to_ok_G</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">s</span>:</span> <span class="inlinecode"><span class="id" title="var">G</span></span>       <br>
    <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">∉</span> <span class="inlinecode"><span class="id" title="var">dom</span>(<span class="id" title="var">G</span>)</span> <br>
    <span class="inlinecode">――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">∉</span> <span class="inlinecode"><span class="id" title="var">dom</span>(<span class="id" title="var">s</span>)</span> 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="well_typed_notin_dom"><span class="id" title="lemma">well_typed_notin_dom</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">s</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#well_typed"><span class="id" title="inductive">well_typed</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">#</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="val_typing"><span class="id" title="lemma">val_typing</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_val"><span class="id" title="constructor">trm_val</span></a> <a class="idref" href="CanonicalForms.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">T'</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">⊢!</span></a><a class="idref" href="PreciseTyping.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">v</span></a> <a class="idref" href="CanonicalForms.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="PreciseTyping.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">:</span></a> <span class="id" title="var">T'</span> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">T'</span> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHty_trm</span> <span class="id" title="var">_</span> <span class="id" title="constructor">eq_refl</span>). <span class="id" title="var">destruct_all</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="record_has_trm_dec"><span class="id" title="lemma">record_has_trm_dec</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span> <span class="id" title="var">T'</span> <span class="id" title="var">U'</span> <span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_path"><span class="id" title="constructor">trm_path</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_type"><span class="id" title="definition">record_type</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_type"><span class="id" title="definition">record_type</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_has"><span class="id" title="inductive">record_has</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> (<a class="idref" href="Definitions.html#dec_trm"><span class="id" title="constructor">dec_trm</span></a> <a class="idref" href="CanonicalForms.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="CanonicalForms.html#T'"><span class="id" title="variable">T'</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="Definitions.html#record_has"><span class="id" title="inductive">record_has</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> (<a class="idref" href="Definitions.html#dec_trm"><span class="id" title="constructor">dec_trm</span></a> <a class="idref" href="CanonicalForms.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="CanonicalForms.html#U'"><span class="id" title="variable">U'</span></a>) <span class="id" title="notation">/\</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CanonicalForms.html#T'"><span class="id" title="variable">T'</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="CanonicalForms.html#U'"><span class="id" title="variable">U'</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hs</span> <span class="id" title="var">HrT</span> <span class="id" title="var">HrU</span> <span class="id" title="var">Ha</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="record_has_ty_dec"><span class="id" title="lemma">record_has_ty_dec</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span> <span class="id" title="var">T'</span> <span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_path"><span class="id" title="constructor">trm_path</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_type"><span class="id" title="definition">record_type</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_type"><span class="id" title="definition">record_type</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_has"><span class="id" title="inductive">record_has</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> (<a class="idref" href="Definitions.html#dec_typ"><span class="id" title="constructor">dec_typ</span></a> <a class="idref" href="CanonicalForms.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="CanonicalForms.html#T'"><span class="id" title="variable">T'</span></a> <a class="idref" href="CanonicalForms.html#T'"><span class="id" title="variable">T'</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_has"><span class="id" title="inductive">record_has</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> (<a class="idref" href="Definitions.html#dec_typ"><span class="id" title="constructor">dec_typ</span></a> <a class="idref" href="CanonicalForms.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="CanonicalForms.html#T'"><span class="id" title="variable">T'</span></a> <a class="idref" href="CanonicalForms.html#T'"><span class="id" title="variable">T'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hs</span> <span class="id" title="var">HrT</span> <span class="id" title="var">HrU</span> <span class="id" title="var">HA</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="val_typing_sub"><span class="id" title="lemma">val_typing_sub</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span> <span class="id" title="var">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_val"><span class="id" title="constructor">trm_val</span></a> <a class="idref" href="CanonicalForms.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_bnd"><span class="id" title="constructor">typ_bnd</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_path"><span class="id" title="constructor">trm_path</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_type"><span class="id" title="definition">record_type</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_type"><span class="id" title="definition">record_type</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_val"><span class="id" title="constructor">trm_val</span></a> <a class="idref" href="CanonicalForms.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_bnd"><span class="id" title="constructor">typ_bnd</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hp</span> <span class="id" title="var">HT</span> <span class="id" title="var">HU</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="GeneralToTight.html#general_to_tight_typing"><span class="id" title="lemma">general_to_tight_typing</span></a> <span class="id" title="var">Hi</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="InvertibleTyping.html#tight_to_invertible_v"><span class="id" title="lemma">tight_to_invertible_v</span></a> <span class="id" title="var">Hi</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hv</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">H</span>. <span class="id" title="var">pick_fresh</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">x</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="var">L</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hx</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H3</span> <span class="id" title="var">x</span> <span class="id" title="var">Hx</span>). <span class="id" title="tactic">assert</span> (<span class="id" title="var">HT'</span> := <span class="id" title="var">HT</span>). <span class="id" title="tactic">assert</span> (<span class="id" title="var">HU'</span> := <span class="id" title="var">HU</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HT</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lsT</span> <span class="id" title="var">HT</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">HU</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lsU</span> <span class="id" title="var">HU</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">HT</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">D</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="RecordAndInertTypes.html#open_record_type_p"><span class="id" title="lemma">open_record_type_p</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">p</span>:=<span class="id" title="var">p</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">HT'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="RecordAndInertTypes.html#open_record_type_p"><span class="id" title="lemma">open_record_type_p</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">p</span>:=<span class="id" title="var">p</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">HU'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Definitions.html#record_has"><span class="id" title="inductive">record_has</span></a> (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">p</span> (<a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">{</span></a><span class="id" title="var">t</span> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">&gt;:</span></a> <span class="id" title="var">t1</span> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">&lt;:</span></a> <span class="id" title="var">t1</span><a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">}</span></a>)) (<a class="idref" href="Definitions.html#open_dec_p"><span class="id" title="definition">open_dec_p</span></a> <span class="id" title="var">p</span> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">{</span></a><span class="id" title="var">t</span> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">&gt;:</span></a> <span class="id" title="var">t1</span> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">&lt;:</span></a> <span class="id" title="var">t1</span><a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">}</span></a>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrh</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a>, <a class="idref" href="Definitions.html#open_dec_p"><span class="id" title="definition">open_dec_p</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hr</span>: (<a class="idref" href="CanonicalForms.html#record_has_ty_dec"><span class="id" title="axiom">record_has_ty_dec</span></a> <span class="id" title="var">Hp</span> <span class="id" title="var">Hs</span> <span class="id" title="var">HT'</span> <span class="id" title="var">HU'</span> <span class="id" title="var">Hrh</span>).<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">d1</span></span> <span class="inlinecode"><span class="id" title="var">isin</span></span> <span class="inlinecode"><span class="id" title="var">ds</span></span>             <br>
    <span class="inlinecode"><span class="id" title="var">label</span>(<span class="id" title="var">d2</span>)</span> <span class="inlinecode">\<span class="id" title="var">notin</span></span> <span class="inlinecode"><span class="id" title="var">ds</span></span>     <br>
    <span class="inlinecode">―――――――――――――――――――――</span>  <br>
    <span class="inlinecode"><span class="id" title="var">label</span>(<span class="id" title="var">d1</span>)</span> <span class="inlinecode">&lt;&gt;</span> <span class="inlinecode"><span class="id" title="var">label</span>(<span class="id" title="var">d2</span>)</span>  
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="defs_has_hasnt_neq"><span class="id" title="lemma">defs_has_hasnt_neq</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">ds</span> <span class="id" title="var">d1</span> <span class="id" title="var">d2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#defs_has"><span class="id" title="definition">defs_has</span></a> <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a> <a class="idref" href="CanonicalForms.html#d1"><span class="id" title="variable">d1</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#defs_hasnt"><span class="id" title="definition">defs_hasnt</span></a> <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a> (<a class="idref" href="Definitions.html#label_of_def"><span class="id" title="definition">label_of_def</span></a> <a class="idref" href="CanonicalForms.html#d2"><span class="id" title="variable">d2</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#label_of_def"><span class="id" title="definition">label_of_def</span></a> <a class="idref" href="CanonicalForms.html#d1"><span class="id" title="variable">d1</span></a> <span class="id" title="notation">&lt;&gt;</span> <a class="idref" href="Definitions.html#label_of_def"><span class="id" title="definition">label_of_def</span></a> <a class="idref" href="CanonicalForms.html#d2"><span class="id" title="variable">d2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hhas</span> <span class="id" title="var">Hhasnt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Definitions.html#defs_has"><span class="id" title="definition">defs_has</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Hhas</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Definitions.html#defs_hasnt"><span class="id" title="definition">defs_hasnt</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Hhasnt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ds</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hhas</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hhas</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hhasnt</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hhas</span>. <span class="id" title="var">case_if</span>; <span class="id" title="var">case_if</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">inversions</span> <span class="id" title="var">Hhas</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHds</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">ds</span></span> <span class="inlinecode">::</span> <span class="inlinecode">...</span> <span class="inlinecode">/\</span> <span class="inlinecode"><span class="id" title="var">D</span></span> <span class="inlinecode">/\</span> <span class="inlinecode">...</span>       <br>
    <span class="inlinecode">―――――――――――――――――――――――</span>       <br>
    <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode"><span class="id" title="var">d</span>,</span> <span class="inlinecode"><span class="id" title="var">ds</span></span> <span class="inlinecode">=</span> <span class="inlinecode">...</span> <span class="inlinecode">/\</span> <span class="inlinecode"><span class="id" title="var">d</span></span> <span class="inlinecode">/\</span> <span class="inlinecode">...</span>       <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">d</span>:</span> <span class="inlinecode"><span class="id" title="var">D</span></span>                      
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="record_has_ty_defs"><span class="id" title="lemma">record_has_ty_defs</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">z</span> <span class="id" title="var">bs</span> <span class="id" title="var">P</span> <span class="id" title="var">G</span> <span class="id" title="var">T</span> <span class="id" title="var">ds</span> <span class="id" title="var">D</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#z"><span class="id" title="variable">z</span></a><a class="idref" href="Definitions.html#265f303fe4fdd948d52d0ba6e47010c4"><span class="id" title="notation">;</span></a> <a class="idref" href="CanonicalForms.html#bs"><span class="id" title="variable">bs</span></a><a class="idref" href="Definitions.html#265f303fe4fdd948d52d0ba6e47010c4"><span class="id" title="notation">;</span></a> <a class="idref" href="CanonicalForms.html#P"><span class="id" title="variable">P</span></a><a class="idref" href="Definitions.html#265f303fe4fdd948d52d0ba6e47010c4"><span class="id" title="notation">;</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#265f303fe4fdd948d52d0ba6e47010c4"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a> <a class="idref" href="Definitions.html#265f303fe4fdd948d52d0ba6e47010c4"><span class="id" title="notation">::</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_has"><span class="id" title="inductive">record_has</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="CanonicalForms.html#D"><span class="id" title="variable">D</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">d</span><span class="id" title="notation">,</span> <a class="idref" href="Definitions.html#defs_has"><span class="id" title="definition">defs_has</span></a> <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a> <span class="id" title="var">d</span> <span class="id" title="notation">/\</span> <a class="idref" href="CanonicalForms.html#z"><span class="id" title="variable">z</span></a><a class="idref" href="Definitions.html#9632c35441c027f00a6acc65a86aab28"><span class="id" title="notation">;</span></a> <a class="idref" href="CanonicalForms.html#bs"><span class="id" title="variable">bs</span></a><a class="idref" href="Definitions.html#9632c35441c027f00a6acc65a86aab28"><span class="id" title="notation">;</span></a> <a class="idref" href="CanonicalForms.html#P"><span class="id" title="variable">P</span></a><a class="idref" href="Definitions.html#9632c35441c027f00a6acc65a86aab28"><span class="id" title="notation">;</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#9632c35441c027f00a6acc65a86aab28"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">d</span> <a class="idref" href="Definitions.html#9632c35441c027f00a6acc65a86aab28"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#D"><span class="id" title="variable">D</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hdefs</span> <span class="id" title="var">Hhas</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hdefs</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hhas</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="Definitions.html#defs_has"><span class="id" title="definition">defs_has</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">If_l</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hhas</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHHdefs</span> <span class="id" title="var">H4</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">d'</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">d'</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">unfold</span> <a class="idref" href="Definitions.html#defs_has"><span class="id" title="definition">defs_has</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">If_r</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_eq_sym</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="CanonicalForms.html#defs_has_hasnt_neq"><span class="id" title="lemma">defs_has_hasnt_neq</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">unfold</span> <a class="idref" href="Definitions.html#defs_has"><span class="id" title="definition">defs_has</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">If_l</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">inversions</span>* <span class="id" title="var">H4</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="stack_typing"><span class="id" title="lemma">stack_typing</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">s</span> <span class="id" title="var">v</span> <span class="id" title="var">p</span> <span class="id" title="var">ps</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#well_typed"><span class="id" title="inductive">well_typed</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">∋</span></a> <span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#v"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">//</span></a> <a class="idref" href="CanonicalForms.html#ps"><span class="id" title="variable">ps</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">T</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_val"><span class="id" title="constructor">trm_val</span></a> <a class="idref" href="CanonicalForms.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <span class="id" title="var">T</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hs</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">~</span> <span class="inlinecode"><span class="id" title="var">s</span></span>                             <br>
    <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode">∋</span> <span class="inlinecode">(<span class="id" title="var">p</span>,</span> <span class="inlinecode"><span class="id" title="var">ν</span>(<span class="id" title="var">U</span>)...{<span class="id" title="var">a</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">q</span>}...)</span> <span class="inlinecode">//</span> <span class="inlinecode"><span class="id" title="var">ps</span></span>  <br>
    <span class="inlinecode">――――――――――――――――――――――――――――――――</span>  <br>
    <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode"><span class="id" title="var">T</span>,</span> <span class="inlinecode">Г</span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">q</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>                         
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="stack_path_typing"><span class="id" title="lemma">stack_path_typing</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">ps</span> <span class="id" title="var">G</span> <span class="id" title="var">s</span> <span class="id" title="var">U</span> <span class="id" title="var">ds</span> <span class="id" title="var">a</span> <span class="id" title="var">q</span> <span class="id" title="var">p</span> <span class="id" title="var">r</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#well_typed"><span class="id" title="inductive">well_typed</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">∋</span></a> <span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a><span class="id" title="notation">,</span> <a class="idref" href="Definitions.html#val_new"><span class="id" title="constructor">val_new</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a><span class="id" title="notation">)</span> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">//</span></a> <a class="idref" href="CanonicalForms.html#ps"><span class="id" title="variable">ps</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#defs_has"><span class="id" title="definition">defs_has</span></a> (<a class="idref" href="Definitions.html#open_defs_p"><span class="id" title="definition">open_defs_p</span></a> <a class="idref" href="CanonicalForms.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a>) (<a class="idref" href="Definitions.html#def_trm"><span class="id" title="constructor">def_trm</span></a> <a class="idref" href="CanonicalForms.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="Definitions.html#trm_path"><span class="id" title="constructor">trm_path</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a>)) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">T</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_path"><span class="id" title="constructor">trm_path</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <span class="id" title="var">T</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#stack_typing"><span class="id" title="axiom">stack_typing</span></a> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hs</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">T</span> <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;apply&nbsp;<span class="inlinecode"><span class="id" title="var">stack_typing</span></span>&nbsp;to&nbsp;say&nbsp;that&nbsp;<span class="inlinecode"><span class="id" title="var">val_new</span></span> <span class="inlinecode"><span class="id" title="var">U</span></span> <span class="inlinecode"><span class="id" title="var">ds</span></span>&nbsp;is&nbsp;typed&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">G</span></span>,&nbsp;and&nbsp;therefore,&nbsp;<span class="inlinecode"><span class="id" title="var">q</span></span>&nbsp;can&nbsp;be&nbsp;typed.&nbsp;*)</span><br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">~</span> <span class="inlinecode"><span class="id" title="var">s</span></span>                 <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>              <br>
    <span class="inlinecode">―――――――――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode"><span class="id" title="var">v</span>,</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode">∋</span> <span class="inlinecode">(<span class="id" title="var">p</span>,</span> <span class="inlinecode"><span class="id" title="var">v</span>)</span> 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="typed_path_lookup"><span class="id" title="lemma">typed_path_lookup</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">s</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#well_typed"><span class="id" title="inductive">well_typed</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_path"><span class="id" title="constructor">trm_path</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">v</span> <span class="id" title="var">ps</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">∋</span></a> <span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a><span class="id" title="notation">,</span> <span class="id" title="var">v</span><span class="id" title="notation">)</span> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">//</span></a> <span class="id" title="var">ps</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp</span>. <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="path_lookup"><span class="id" title="lemma">path_lookup</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span> <span class="id" title="var">ps</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">∋</span></a> <a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">//</span></a> <a class="idref" href="CanonicalForms.html#ps"><span class="id" title="variable">ps</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">ds</span> <span class="id" title="var">a</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#well_typed"><span class="id" title="inductive">well_typed</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">=</span> <span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a><span class="id" title="notation">,</span> <a class="idref" href="Definitions.html#val_new"><span class="id" title="constructor">val_new</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#defs_has"><span class="id" title="definition">defs_has</span></a> (<a class="idref" href="Definitions.html#open_defs_p"><span class="id" title="definition">open_defs_p</span></a> <a class="idref" href="CanonicalForms.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a>) (<a class="idref" href="Definitions.html#def_trm"><span class="id" title="constructor">def_trm</span></a> <a class="idref" href="CanonicalForms.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="Definitions.html#trm_path"><span class="id" title="constructor">trm_path</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a>)) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">v</span> <span class="id" title="var">ps'</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">∋</span></a> <span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a><span class="id" title="notation">,</span> <span class="id" title="var">v</span><span class="id" title="notation">)</span> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">//</span></a> <span class="id" title="var">ps'</span><span class="id" title="notation">)</span> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">s</span> <span class="id" title="var">p</span> <span class="id" title="var">ds</span> <span class="id" title="var">ps</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Binding.html#87f0c8bba95a958dd7590c91c0ac1961"><span class="id" title="notation">↓</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Binding.html#87f0c8bba95a958dd7590c91c0ac1961"><span class="id" title="notation">==</span></a> <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a> <a class="idref" href="Binding.html#87f0c8bba95a958dd7590c91c0ac1961"><span class="id" title="notation">//</span></a> <a class="idref" href="CanonicalForms.html#ps"><span class="id" title="variable">ps</span></a> <span class="id" title="notation">-&gt;</span> <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">a</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#well_typed"><span class="id" title="inductive">well_typed</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#defs_has"><span class="id" title="definition">defs_has</span></a> <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a> (<a class="idref" href="Definitions.html#def_trm"><span class="id" title="constructor">def_trm</span></a> <a class="idref" href="CanonicalForms.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="Definitions.html#trm_path"><span class="id" title="constructor">trm_path</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a>)) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">v</span> <span class="id" title="var">ps'</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">∋</span></a> <span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a><span class="id" title="notation">,</span> <span class="id" title="var">v</span><span class="id" title="notation">)</span> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">//</span></a> <span class="id" title="var">ps'</span><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Binding.html#lookup_mutind"><span class="id" title="definition">lookup_mutind</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "lookup_var".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hl</span>: (<a class="idref" href="Binding.html#lookup_var"><span class="id" title="constructor">lookup_var</span></a> <span class="id" title="var">ps</span> <span class="id" title="var">b</span>). <span class="id" title="var">inversions</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#stack_path_typing"><span class="id" title="axiom">stack_path_typing</span></a> <span class="id" title="var">r</span> <span class="id" title="var">H</span> <span class="id" title="var">Hl</span> <span class="id" title="var">H1</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U</span> <span class="id" title="var">Hq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#typed_path_lookup"><span class="id" title="axiom">typed_path_lookup</span></a> <span class="id" title="var">H</span> <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">P'</span> [<span class="id" title="var">v</span> <span class="id" title="var">Hs</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "lookup_val".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hl</span>: (<a class="idref" href="Binding.html#lookup_val"><span class="id" title="constructor">lookup_val</span></a> <span class="id" title="var">l</span> <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#stack_path_typing"><span class="id" title="axiom">stack_path_typing</span></a> <span class="id" title="var">r</span> <span class="id" title="var">H0</span> <span class="id" title="var">Hl</span> <span class="id" title="var">H2</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U</span> <span class="id" title="var">Hq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#typed_path_lookup"><span class="id" title="axiom">typed_path_lookup</span></a> <span class="id" title="var">H0</span> <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">P'</span> [<span class="id" title="var">v</span> <span class="id" title="var">Hs</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "lookup_path".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">H2</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span> <span class="id" title="var">d</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> [<span class="id" title="var">P'</span> <span class="id" title="var">Hs</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Binding.html#named_path_lookup_l"><span class="id" title="lemma">named_path_lookup_l</span></a> <span class="id" title="var">H2</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">z</span> [<span class="id" title="var">ds</span> <span class="id" title="var">Heq</span>]]. <span class="id" title="var">inversions</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>* <span class="id" title="var">H0</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">~</span> <span class="inlinecode"><span class="id" title="var">s</span></span>                          <br>
    <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode">∋</span> <span class="inlinecode">(<span class="id" title="var">p</span>,</span> <span class="inlinecode"><span class="id" title="var">ν</span>(<span class="id" title="var">T</span>)...{<span class="id" title="var">a</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">q</span>}...</span>  <br>
    <span class="inlinecode">―――――――――――――――――――――――――――――</span>  <br>
    <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode"><span class="id" title="var">v</span></span> <span class="inlinecode"><span class="id" title="var">P'</span>,</span> <span class="inlinecode"><span class="id" title="var">P'</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode">∋</span> <span class="inlinecode">(<span class="id" title="var">q</span>,</span> <span class="inlinecode"><span class="id" title="var">v</span>)</span>        
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="path_lookup_l"><span class="id" title="lemma">path_lookup_l</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">s</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">ds</span> <span class="id" title="var">a</span> <span class="id" title="var">q</span> <span class="id" title="var">ps</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#well_typed"><span class="id" title="inductive">well_typed</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">∋</span></a> <span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a><span class="id" title="notation">,</span> <a class="idref" href="Definitions.html#val_new"><span class="id" title="constructor">val_new</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a><span class="id" title="notation">)</span> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">//</span></a> <a class="idref" href="CanonicalForms.html#ps"><span class="id" title="variable">ps</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#defs_has"><span class="id" title="definition">defs_has</span></a> (<a class="idref" href="Definitions.html#open_defs_p"><span class="id" title="definition">open_defs_p</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="CanonicalForms.html#ds"><span class="id" title="variable">ds</span></a>) (<a class="idref" href="Definitions.html#def_trm"><span class="id" title="constructor">def_trm</span></a> <a class="idref" href="CanonicalForms.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="Definitions.html#trm_path"><span class="id" title="constructor">trm_path</span></a> <a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a>)) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">v</span> <span class="id" title="var">ps'</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">∋</span></a> <span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#q"><span class="id" title="variable">q</span></a><span class="id" title="notation">,</span> <span class="id" title="var">v</span><span class="id" title="notation">)</span> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">//</span></a> <span class="id" title="var">ps'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span>* <a class="idref" href="CanonicalForms.html#path_lookup"><span class="id" title="lemma">path_lookup</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">~</span> <span class="inlinecode"><span class="id" title="var">s</span></span>          <br>
    <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode">∋</span> <span class="inlinecode">(<span class="id" title="var">p</span>,</span> <span class="inlinecode"><span class="id" title="var">v</span>)</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>      <br>
    <span class="inlinecode">――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">v</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>       
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="path_lookup_typing"><span class="id" title="lemma">path_lookup_typing</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">s</span> <span class="id" title="var">p</span> <span class="id" title="var">ps</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#well_typed"><span class="id" title="inductive">well_typed</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">∋</span></a> <span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#v"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">//</span></a> <a class="idref" href="CanonicalForms.html#ps"><span class="id" title="variable">ps</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="PreciseTyping.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⪼</span></a> <a class="idref" href="CanonicalForms.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_val"><span class="id" title="constructor">trm_val</span></a> <a class="idref" href="CanonicalForms.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hp</span>. <span class="id" title="var">gen</span> <span class="id" title="var">T'</span> <span class="id" title="var">T</span> <span class="id" title="var">v</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hwt</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">false</span>* <a class="idref" href="Binding.html#lookup_empty"><span class="id" title="lemma">lookup_empty</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">y</span> <span class="id" title="var">bs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;showing&nbsp;that&nbsp;y&nbsp;is&nbsp;named&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hg</span>: (<a class="idref" href="PreciseTyping.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a> <span class="id" title="var">Hp</span>). <span class="id" title="tactic">apply</span> <a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Hg</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">Hg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_all</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">classicT</span> (<span class="id" title="var">x</span> <span class="id" title="notation">=</span> <span class="id" title="var">x0</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">x1</span> <span class="id" title="var">into</span> <span class="id" title="var">bs</span>. <span class="id" title="var">gen</span> <span class="id" title="var">v0</span> <span class="id" title="var">v</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">Case</span> "pf_bind".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">binds_push_eq_inv</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">x0</span>) <span class="id" title="constructor">nil</span> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#pvar"><span class="id" title="definition">pvar</span></a> <span class="id" title="var">x0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Binding.html#lookup_push_eq_inv_var"><span class="id" title="lemma">lookup_push_eq_inv_var</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Hs</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span>* <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">Case</span> "pf_fld".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <a class="idref" href="Definitions.html#sel_fields"><span class="id" title="definition">sel_fields</span></a>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">f</span> <span class="id" title="var">x0</span> <span class="id" title="var">H0</span> <span class="id" title="var">T</span> <span class="id" title="var">G</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">H</span> <span class="id" title="var">IHHwt</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="constructor">JMeq_refl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <a class="idref" href="Definitions.html#sel_fields"><span class="id" title="definition">sel_fields</span></a>. <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">SCase</span> "lookup_val".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <a class="idref" href="Definitions.html#sel_fields"><span class="id" title="definition">sel_fields</span></a>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">bs</span>]. <span class="id" title="var">simpls</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hv</span> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;from<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode">Г,</span> <span class="inlinecode"><span class="id" title="var">x0</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">ν</span>(<span class="id" title="var">T1</span>)<span class="id" title="var">ds0</span>:</span> <span class="inlinecode"><span class="id" title="var">T0</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">T0</span></span> <span class="inlinecode"><span class="id" title="var">inert</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">T0</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">μ</span>(<span class="id" title="var">T1</span>)</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;from<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode">Г,</span> <span class="inlinecode"><span class="id" title="var">x0</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">ν</span>(<span class="id" title="var">T1</span>)<span class="id" title="var">ds0</span>:</span> <span class="inlinecode"><span class="id" title="var">μ</span>(<span class="id" title="var">T1</span>)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode">Г,</span> <span class="inlinecode"><span class="id" title="var">x0</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span>,</span> <span class="inlinecode"><span class="id" title="var">y</span>:</span> <span class="inlinecode"><span class="id" title="var">T1</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">ds0</span>^<span class="id" title="var">y</span>:</span> <span class="inlinecode"><span class="id" title="var">T1</span>^<span class="id" title="var">y</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;from&nbsp;that&nbsp;and<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode">Г,</span> <span class="inlinecode"><span class="id" title="var">x0</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">x0.f</span>:</span> <span class="inlinecode"><span class="id" title="var">T1</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get&nbsp;through&nbsp;substitution&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">y</span></span>&nbsp;by&nbsp;<span class="inlinecode"><span class="id" title="var">x0.f</span></span>&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode">Г,</span> <span class="inlinecode"><span class="id" title="var">x0</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">ds0</span>^<span class="id" title="var">x0.f</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T1</span>^<span class="id" title="var">x0.f</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;from&nbsp;that&nbsp;and<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">ds0</span>^<span class="id" title="var">x0.f</span></span> <span class="inlinecode">=</span> <span class="inlinecode">...{<span class="id" title="var">a</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">v0</span>}...</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">T0</span></span> <span class="inlinecode">=</span> <span class="inlinecode">...{<span class="id" title="var">a</span>:</span> <span class="inlinecode"><span class="id" title="var">U</span>}...</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode">Г,</span> <span class="inlinecode"><span class="id" title="var">x0</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">v0</span>:</span> <span class="inlinecode"><span class="id" title="var">U</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">admit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">SCase</span> "lookup_path".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfolds</span> <a class="idref" href="Definitions.html#sel_fields"><span class="id" title="definition">sel_fields</span></a>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="PreciseTyping.html#pf_inert_rcd_U"><span class="id" title="lemma">pf_inert_rcd_U</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">V</span> <span class="id" title="var">Heq</span>]. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hrh</span>: (<a class="idref" href="PreciseTyping.html#precise_flow_record_has"><span class="id" title="lemma">precise_flow_record_has</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>). <span class="id" title="var">simpls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">H3</span>. <span class="id" title="var">admit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">Case</span> "pf_open".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">Case</span> "pf_and1".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">Case</span> "pf_and2".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#pf_strengthen"><span class="id" title="lemma">pf_strengthen</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <span class="id" title="var">G</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hi'</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>* <a class="idref" href="RecordAndInertTypes.html#inert_prefix"><span class="id" title="lemma">inert_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hn</span>: (<a class="idref" href="Binding.html#lookup_strengthen"><span class="id" title="axiom">lookup_strengthen</span></a> <span class="id" title="var">Hs</span> <span class="id" title="var">n</span>). <span class="id" title="tactic">apply</span>* <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="corresponding_types"><span class="id" title="lemma">corresponding_types</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">s</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#well_typed"><span class="id" title="inductive">well_typed</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseTyping.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="PreciseTyping.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⪼</span></a> <a class="idref" href="CanonicalForms.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">exists</span> <span class="id" title="var">v</span> <span class="id" title="var">ps</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">∋</span></a> <span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a><span class="id" title="notation">,</span> <span class="id" title="var">v</span><span class="id" title="notation">)</span> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">//</span></a> <span class="id" title="var">ps</span> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_val"><span class="id" title="constructor">trm_val</span></a> <span class="id" title="var">v</span> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#pf_precise_U"><span class="id" title="lemma">pf_precise_U</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hg</span>: (<a class="idref" href="PreciseTyping.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a> <span class="id" title="var">Hp</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#typed_path_lookup"><span class="id" title="axiom">typed_path_lookup</span></a> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hg</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">P</span> [<span class="id" title="var">v</span> <span class="id" title="var">Hs</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hi'</span>: (<a class="idref" href="PreciseTyping.html#pf_inert_T"><span class="id" title="lemma">pf_inert_T</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Ht</span>: (<a class="idref" href="CanonicalForms.html#path_lookup_typing"><span class="id" title="lemma">path_lookup_typing</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hp</span>). <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##<span class="id" title="var">v</span></span> <span class="inlinecode"><span class="id" title="var">v</span>:</span> <span class="inlinecode"><span class="id" title="keyword">forall</span>(<span class="id" title="var">S</span>)<span class="id" title="var">T</span></span>                 <br>
    <span class="inlinecode"><span class="id" title="var">inert</span></span> <span class="inlinecode"><span class="id" title="var">G</span></span>                          <br>
    <span class="inlinecode">――――――――――――――――――――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode"><span class="id" title="var">S'</span>,</span> <span class="inlinecode"><span class="id" title="var">T'</span>,</span> <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!</span> <span class="inlinecode"><span class="id" title="var">v</span>:</span> <span class="inlinecode"><span class="id" title="keyword">forall</span>(<span class="id" title="var">S'</span>)<span class="id" title="var">T'</span></span>      <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">S'</span></span>                      <br>
    <span class="inlinecode"><span class="id" title="keyword">forall</span></span> <span class="inlinecode"><span class="id" title="tactic">fresh</span></span> <span class="inlinecode"><span class="id" title="var">y</span>,</span> <span class="inlinecode"><span class="id" title="var">G</span>,</span> <span class="inlinecode"><span class="id" title="var">y</span>:</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">T'</span>^<span class="id" title="var">y</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T</span>^<span class="id" title="var">y</span></span> 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="invertible_val_to_precise_lambda"><span class="id" title="lemma">invertible_val_to_precise_lambda</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">v</span></a> <a class="idref" href="CanonicalForms.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_all"><span class="id" title="constructor">typ_all</span></a> <a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">L</span> <span class="id" title="var">S'</span> <span class="id" title="var">T'</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">⊢!</span></a><a class="idref" href="PreciseTyping.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">v</span></a> <a class="idref" href="CanonicalForms.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="PreciseTyping.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_all"><span class="id" title="constructor">typ_all</span></a> <span class="id" title="var">S'</span> <span class="id" title="var">T'</span> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">&lt;:</span></a> <span class="id" title="var">S'</span> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="var">L</span> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="CanonicalForms.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="var">T'</span> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Ht</span> <span class="id" title="var">Hg</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> (<span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>) <span class="id" title="var">S</span> <span class="id" title="var">T</span>. <span class="id" title="tactic">split</span>*.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHHt</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">Hg</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">L'</span> [<span class="id" title="var">S'</span> [<span class="id" title="var">T'</span> [<span class="id" title="var">Hp</span> [<span class="id" title="var">Hss</span> <span class="id" title="var">Hst</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">L'</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>) <span class="id" title="var">S'</span> <span class="id" title="var">T'</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">T</span>:=<span class="id" title="var">S1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>* <a class="idref" href="TightTyping.html#tight_to_general"><span class="id" title="lemma">tight_to_general</span></a>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="inductive">ok</span> (<span class="id" title="var">G</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">y</span> <span class="id" title="notation">~</span> <span class="id" title="var">S</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hok</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>* <span class="id" title="constructor">ok_push</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">T</span>:=<a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <span class="id" title="var">y</span> <span class="id" title="var">T1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eapply</span> <a class="idref" href="Narrowing.html#narrow_subtyping"><span class="id" title="lemma">narrow_subtyping</span></a>. <span class="id" title="tactic">apply</span>* <span class="id" title="var">Hst</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Subenvironments.html#subenv_last"><span class="id" title="lemma">subenv_last</span></a>. <span class="id" title="tactic">apply</span>* <a class="idref" href="TightTyping.html#tight_to_general"><span class="id" title="lemma">tight_to_general</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span>* <span class="id" title="var">H0</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="keyword">forall</span></span> to <span class="inlinecode"><span class="id" title="var">G</span>(<span class="id" title="var">x</span>)</span>        <br>
    <span class="inlinecode"><span class="id" title="var">inert</span></span> <span class="inlinecode"><span class="id" title="var">G</span></span>            <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="keyword">forall</span>(<span class="id" title="var">T</span>)<span class="id" title="var">U</span></span>       <br>
    <span class="inlinecode">――――――――――――――--</span>   <br>
    <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode"><span class="id" title="var">T'</span>,</span> <span class="inlinecode"><span class="id" title="var">U'</span>,</span>          <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">∋</span> <span class="inlinecode">(<span class="id" title="var">p</span>,</span> <span class="inlinecode"><span class="id" title="keyword">forall</span>(<span class="id" title="var">T'</span>)<span class="id" title="var">U'</span>)</span>   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T'</span></span>        <br>
    <span class="inlinecode"><span class="id" title="keyword">forall</span></span> <span class="inlinecode"><span class="id" title="tactic">fresh</span></span> <span class="inlinecode"><span class="id" title="var">y</span>,</span> <span class="inlinecode"><span class="id" title="var">G</span>,</span> <span class="inlinecode"><span class="id" title="var">y</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">U'</span>^<span class="id" title="var">y</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">U</span>^<span class="id" title="var">y</span></span> 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="var_typ_all_to_binds"><span class="id" title="lemma">var_typ_all_to_binds</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_path"><span class="id" title="constructor">trm_path</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_all"><span class="id" title="constructor">typ_all</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">exists</span> <span class="id" title="var">L</span> <span class="id" title="var">V</span> <span class="id" title="var">T'</span> <span class="id" title="var">U'</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_all"><span class="id" title="constructor">typ_all</span></a> <span class="id" title="var">T'</span> <span class="id" title="var">U'</span> <a class="idref" href="PreciseTyping.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⪼</span></a> <span class="id" title="var">V</span> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">&lt;:</span></a> <span class="id" title="var">T'</span> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="var">L</span> <span class="id" title="notation">-&gt;</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">(</span></a><a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="var">U'</span><a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">)</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">(</span></a><a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a><a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">)</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hin</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Htt</span>: (<a class="idref" href="GeneralToTight.html#general_to_tight_typing"><span class="id" title="lemma">general_to_tight_typing</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hinv</span>: (<a class="idref" href="InvertibleTyping.html#tight_to_invertible"><span class="id" title="lemma">tight_to_invertible</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Htt</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="InvertibleTyping.html#invertible_to_precise_typ_all"><span class="id" title="lemma">invertible_to_precise_typ_all</span></a> (<a class="idref" href="PreciseTyping.html#inert_ok"><span class="id" title="lemma">inert_ok</span></a> <span class="id" title="var">Hin</span>) <span class="id" title="var">Hinv</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">T'</span> [<span class="id" title="var">U'</span> [<span class="id" title="var">V</span> [<span class="id" title="var">L</span> [<span class="id" title="var">Htp</span> [<span class="id" title="var">Hs1</span> <span class="id" title="var">Hs2</span>]]]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">L</span> <span class="id" title="var">V</span> <span class="id" title="var">T'</span> <span class="id" title="var">U'</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hv</span>: (<a class="idref" href="PreciseTyping.html#pf_inert_lambda_U"><span class="id" title="lemma">pf_inert_lambda_U</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Htp</span>). <span class="id" title="tactic">subst</span>*. <span class="id" title="tactic">apply</span>* <a class="idref" href="TightTyping.html#tight_to_general"><span class="id" title="lemma">tight_to_general</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="keyword">forall</span></span> to <span class="inlinecode"><span class="id" title="var">lambda</span></span>                 <br>
    <span class="inlinecode"><span class="id" title="var">inert</span></span> <span class="inlinecode"><span class="id" title="var">G</span></span>                       <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">v</span>:</span> <span class="inlinecode"><span class="id" title="keyword">forall</span>(<span class="id" title="var">T</span>)<span class="id" title="var">U</span></span>                  <br>
    <span class="inlinecode">――――――――――――</span>                  <br>
    <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode"><span class="id" title="var">T'</span>,</span> <span class="inlinecode"><span class="id" title="var">t</span>,</span>                      <br>
    <span class="inlinecode"><span class="id" title="var">v</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">lambda</span>(<span class="id" title="var">T'</span>)<span class="id" title="var">t</span></span>               <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T'</span></span>                   <br>
    <span class="inlinecode"><span class="id" title="keyword">forall</span></span> <span class="inlinecode"><span class="id" title="tactic">fresh</span></span> <span class="inlinecode"><span class="id" title="var">y</span>,</span> <span class="inlinecode"><span class="id" title="var">G</span>,</span> <span class="inlinecode"><span class="id" title="var">y</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">t</span>^<span class="id" title="var">y</span>:</span> <span class="inlinecode"><span class="id" title="var">U</span>^<span class="id" title="var">y</span></span> 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="val_typ_all_to_lambda"><span class="id" title="lemma">val_typ_all_to_lambda</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_val"><span class="id" title="constructor">trm_val</span></a> <a class="idref" href="CanonicalForms.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_all"><span class="id" title="constructor">typ_all</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">exists</span> <span class="id" title="var">L</span> <span class="id" title="var">T'</span> <span class="id" title="var">t</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#val_lambda"><span class="id" title="constructor">val_lambda</span></a> <span class="id" title="var">T'</span> <span class="id" title="var">t</span> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">&lt;:</span></a> <span class="id" title="var">T'</span> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="var">L</span> <span class="id" title="notation">-&gt;</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">(</span></a><a class="idref" href="Definitions.html#open_trm"><span class="id" title="definition">open_trm</span></a> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="var">t</span><a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">)</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hin</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Htt</span>: (<a class="idref" href="GeneralToTight.html#general_to_tight_typing"><span class="id" title="lemma">general_to_tight_typing</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hinv</span>: (<a class="idref" href="InvertibleTyping.html#tight_to_invertible_v"><span class="id" title="lemma">tight_to_invertible_v</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Htt</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#invertible_val_to_precise_lambda"><span class="id" title="lemma">invertible_val_to_precise_lambda</span></a> <span class="id" title="var">Hinv</span> <span class="id" title="var">Hin</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">L</span> [<span class="id" title="var">T'</span> [<span class="id" title="var">U'</span> [<span class="id" title="var">Htp</span> [<span class="id" title="var">Hs1</span> <span class="id" title="var">Hs2</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Htp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">L0</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="notation">(</span><span class="id" title="axiom">dom</span> <span class="id" title="var">G</span><span class="id" title="notation">)</span>) <span class="id" title="var">T'</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>~.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">HL</span>: <span class="id" title="var">y</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="var">L</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">HL0</span>: <span class="id" title="var">y</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="var">L0</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hs2</span> <span class="id" title="var">y</span> <span class="id" title="var">HL</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H2</span> <span class="id" title="var">y</span> <span class="id" title="var">HL0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#ty_sub"><span class="id" title="constructor">ty_sub</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Narrowing.html#narrow_typing"><span class="id" title="lemma">narrow_typing</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab55"></a><h1 class="section">Canonical Forms for Functions</h1>


<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="var">inert</span></span> <span class="inlinecode"><span class="id" title="var">G</span></span>              <br>
    <span class="inlinecode"><span class="id" title="var">s</span>:</span> <span class="inlinecode"><span class="id" title="var">G</span></span>                 <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="keyword">forall</span>(<span class="id" title="var">T</span>)<span class="id" title="var">U</span></span>         <br>
    <span class="inlinecode">――――――――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode">∋</span> <span class="inlinecode">(<span class="id" title="var">p</span>,</span> <span class="inlinecode"><span class="id" title="var">lambda</span>(<span class="id" title="var">T'</span>)<span class="id" title="var">t</span>)</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T'</span></span>          <br>
    <span class="inlinecode"><span class="id" title="var">G</span>,</span> <span class="inlinecode"><span class="id" title="var">y</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">t</span>:</span> <span class="inlinecode"><span class="id" title="var">U</span></span>          
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="canonical_forms_fun"><span class="id" title="lemma">canonical_forms_fun</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">s</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#well_typed"><span class="id" title="inductive">well_typed</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_path"><span class="id" title="constructor">trm_path</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_all"><span class="id" title="constructor">typ_all</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">exists</span> <span class="id" title="var">L</span> <span class="id" title="var">T'</span> <span class="id" title="var">t</span> <span class="id" title="var">ps</span><span class="id" title="notation">,</span> <a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">∋</span></a> <span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a><span class="id" title="notation">,</span> <a class="idref" href="Definitions.html#val_lambda"><span class="id" title="constructor">val_lambda</span></a> <span class="id" title="var">T'</span> <span class="id" title="var">t</span><span class="id" title="notation">)</span> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">//</span></a> <span class="id" title="var">ps</span> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">&lt;:</span></a> <span class="id" title="var">T'</span> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="var">L</span> <span class="id" title="notation">-&gt;</span> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#open_trm"><span class="id" title="definition">open_trm</span></a> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="var">t</span> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="CanonicalForms.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hin</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#var_typ_all_to_binds"><span class="id" title="lemma">var_typ_all_to_binds</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Hty</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">L</span> [<span class="id" title="var">V</span> [<span class="id" title="var">S</span> [<span class="id" title="var">T'</span> [<span class="id" title="var">Hp</span> [<span class="id" title="var">Hs1</span> <span class="id" title="var">Hs2</span>]]]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#corresponding_types"><span class="id" title="lemma">corresponding_types</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> [<span class="id" title="var">P</span> [<span class="id" title="var">Bis</span> <span class="id" title="var">Ht</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#val_typ_all_to_lambda"><span class="id" title="lemma">val_typ_all_to_lambda</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Ht</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">L'</span> [<span class="id" title="var">S'</span> [<span class="id" title="var">t</span> [<span class="id" title="var">Heq</span> [<span class="id" title="var">Hs1'</span> <span class="id" title="var">Hs2'</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">L'</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="notation">(</span><span class="id" title="axiom">dom</span> <span class="id" title="var">G</span><span class="id" title="notation">)</span>) <span class="id" title="var">S'</span> <span class="id" title="var">t</span> <span class="id" title="var">P</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>~.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HL</span>: <span class="id" title="var">y</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="var">L</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HL'</span>: <span class="id" title="var">y</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="var">L'</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hs2</span> <span class="id" title="var">y</span> <span class="id" title="var">HL</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hs2'</span> <span class="id" title="var">y</span> <span class="id" title="var">HL'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Narrowing.html#narrow_typing"><span class="id" title="lemma">narrow_typing</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">G'</span>:=<span class="id" title="var">G</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">y</span> <span class="id" title="notation">~</span> <span class="id" title="var">T</span>) <span class="id" title="keyword">in</span> <span class="id" title="var">Hs2'</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#ty_sub"><span class="id" title="constructor">ty_sub</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
This lemma corresponds to Lemma 3.9 (<span class="inlinecode"><span class="id" title="var">mu</span></span> to <span class="inlinecode"><span class="id" title="var">G</span>(<span class="id" title="var">x</span>)</span>) in the paper.

<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="var">inert</span></span> <span class="inlinecode"><span class="id" title="var">G</span></span>                    <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">{<span class="id" title="var">a</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span>}</span>              <br>
    <span class="inlinecode">―――――――――――――――――――――――</span>    <br>
    <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode"><span class="id" title="var">S</span>,</span> <span class="inlinecode"><span class="id" title="var">T'</span>,</span> <span class="inlinecode"><span class="id" title="var">G</span>(<span class="id" title="var">x</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">mu</span>(<span class="id" title="var">S</span>)</span>       <br>
    <span class="inlinecode"><span class="id" title="var">S</span>^<span class="id" title="var">p</span></span> <span class="inlinecode">=</span> <span class="inlinecode">...</span> <span class="inlinecode">/\</span> <span class="inlinecode">{<span class="id" title="var">a</span>:</span> <span class="inlinecode"><span class="id" title="var">T'</span>}</span> <span class="inlinecode">/\</span> <span class="inlinecode">...</span>  <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">T'</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>                
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="var_typ_rcd_to_binds"><span class="id" title="lemma">var_typ_rcd_to_binds</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_path"><span class="id" title="constructor">trm_path</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> (<a class="idref" href="Definitions.html#dec_trm"><span class="id" title="constructor">dec_trm</span></a> <a class="idref" href="CanonicalForms.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">exists</span> <span class="id" title="var">S</span> <span class="id" title="var">T'</span> <span class="id" title="var">V</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_bnd"><span class="id" title="constructor">typ_bnd</span></a> <span class="id" title="var">S</span> <a class="idref" href="PreciseTyping.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⪼</span></a> <span class="id" title="var">V</span> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_has"><span class="id" title="inductive">record_has</span></a> (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="var">S</span>) (<a class="idref" href="Definitions.html#dec_trm"><span class="id" title="constructor">dec_trm</span></a> <a class="idref" href="CanonicalForms.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="var">T'</span>) <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">T'</span> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hin</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hn</span>: (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> <span class="id" title="var">Ht</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> [<span class="id" title="var">bs</span> <span class="id" title="var">Heq</span>]]. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Binding.html#typing_implies_bound"><span class="id" title="lemma">typing_implies_bound</span></a> <span class="id" title="var">Ht</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">S</span> <span class="id" title="var">BiG</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Htt</span>: (<a class="idref" href="GeneralToTight.html#general_to_tight_typing"><span class="id" title="lemma">general_to_tight_typing</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hinv</span>: (<a class="idref" href="InvertibleTyping.html#tight_to_invertible"><span class="id" title="lemma">tight_to_invertible</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Htt</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="InvertibleTyping.html#invertible_to_precise_trm_dec"><span class="id" title="lemma">invertible_to_precise_trm_dec</span></a> <span class="id" title="var">Hinv</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">T'</span> [<span class="id" title="var">V</span> [<span class="id" title="var">Htp</span> <span class="id" title="var">Hs</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="PreciseTyping.html#pf_inert_rcd_U"><span class="id" title="lemma">pf_inert_rcd_U</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Htp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U'</span> <span class="id" title="var">Hr</span>]. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hr'</span>: (<a class="idref" href="PreciseTyping.html#precise_flow_record_has"><span class="id" title="lemma">precise_flow_record_has</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Htp</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="TightTyping.html#tight_to_general"><span class="id" title="lemma">tight_to_general</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Hs</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">mu</span></span> to <span class="inlinecode"><span class="id" title="var">nu</span></span>)

<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="var">inert</span></span> <span class="inlinecode"><span class="id" title="var">G</span></span>                    <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">v</span>:</span> <span class="inlinecode"><span class="id" title="var">mu</span>(<span class="id" title="var">T</span>)</span>               <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span>^<span class="id" title="var">p</span></span>                 <br>
    <span class="inlinecode"><span class="id" title="var">T</span>^<span class="id" title="var">p</span></span> <span class="inlinecode">=</span> <span class="inlinecode">...</span> <span class="inlinecode">/\</span> <span class="inlinecode">{<span class="id" title="var">a</span>:</span> <span class="inlinecode"><span class="id" title="var">U</span>}</span> <span class="inlinecode">/\</span> <span class="inlinecode">...</span>  <span class="inlinecode"></span> <br>
    <span class="inlinecode">――――――――――――――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode"><span class="id" title="var">t</span>,</span> <span class="inlinecode"><span class="id" title="var">ds</span>,</span> <span class="inlinecode"><span class="id" title="var">v</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">nu</span>(<span class="id" title="var">T</span>)<span class="id" title="var">ds</span></span>      <span class="inlinecode"></span> <br>
    <span class="inlinecode"><span class="id" title="var">ds</span>^<span class="id" title="var">p</span></span> <span class="inlinecode">=</span> <span class="inlinecode">...</span> <span class="inlinecode">/\</span> <span class="inlinecode">{<span class="id" title="var">a</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">t</span>}</span> <span class="inlinecode">/\</span> <span class="inlinecode">...</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">t</span>:</span> <span class="inlinecode"><span class="id" title="var">U</span></span> 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="val_mu_to_new"><span class="id" title="lemma">val_mu_to_new</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span> <span class="id" title="var">a</span> <span class="id" title="var">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_val"><span class="id" title="constructor">trm_val</span></a> <a class="idref" href="CanonicalForms.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_bnd"><span class="id" title="constructor">typ_bnd</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_path"><span class="id" title="constructor">trm_path</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_has"><span class="id" title="inductive">record_has</span></a> (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a>) (<a class="idref" href="Definitions.html#dec_trm"><span class="id" title="constructor">dec_trm</span></a> <a class="idref" href="CanonicalForms.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">exists</span> <span class="id" title="var">t</span> <span class="id" title="var">ds</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#val_new"><span class="id" title="constructor">val_new</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="var">ds</span> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#defs_has"><span class="id" title="definition">defs_has</span></a> (<a class="idref" href="Definitions.html#open_defs_p"><span class="id" title="definition">open_defs_p</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="var">ds</span>) (<a class="idref" href="Definitions.html#def_trm"><span class="id" title="constructor">def_trm</span></a> <a class="idref" href="CanonicalForms.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="var">t</span>) <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">t</span><a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Ht</span> <span class="id" title="var">Hx</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Htt</span>: (<a class="idref" href="GeneralToTight.html#general_to_tight_typing"><span class="id" title="lemma">general_to_tight_typing</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hinv</span>: (<a class="idref" href="InvertibleTyping.html#tight_to_invertible_v"><span class="id" title="lemma">tight_to_invertible_v</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Htt</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hinv</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">pick_fresh</span> <span class="id" title="var">z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">z</span> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <span class="id" title="var">L</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hz</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H3</span> <span class="id" title="var">z</span> <span class="id" title="var">Hz</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">bs</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hv</span>: (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> <span class="id" title="var">Hx</span>). <span class="id" title="var">inversions</span> <span class="id" title="var">Hv</span>. <span class="id" title="var">destruct_all</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x0</span><a class="idref" href="Definitions.html#265f303fe4fdd948d52d0ba6e47010c4"><span class="id" title="notation">;</span></a> <span class="id" title="var">bs</span><a class="idref" href="Definitions.html#265f303fe4fdd948d52d0ba6e47010c4"><span class="id" title="notation">;</span></a> <span class="id" title="var">P</span><a class="idref" href="Definitions.html#265f303fe4fdd948d52d0ba6e47010c4"><span class="id" title="notation">;</span></a> <span class="id" title="var">G</span> <a class="idref" href="Definitions.html#265f303fe4fdd948d52d0ba6e47010c4"><span class="id" title="notation">⊢</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#open_defs_p"><span class="id" title="definition">open_defs_p</span></a> (<a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">x0</span>) <span class="id" title="var">bs</span>) <span class="id" title="var">ds</span> <a class="idref" href="Definitions.html#265f303fe4fdd948d52d0ba6e47010c4"><span class="id" title="notation">::</span></a> <a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> (<a class="idref" href="Definitions.html#p_sel"><span class="id" title="constructor">p_sel</span></a> (<a class="idref" href="Definitions.html#avar_f"><span class="id" title="constructor">avar_f</span></a> <span class="id" title="var">x0</span>) <span class="id" title="var">bs</span>) <span class="id" title="var">T</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hds</span> <span class="id" title="tactic">by</span> <span class="id" title="var">admit</span>. <span class="comment">(*apply*&nbsp;renaming_def.*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#record_has_ty_defs"><span class="id" title="lemma">record_has_ty_defs</span></a> <span class="id" title="var">Hds</span> <span class="id" title="var">Hr</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">d</span> [<span class="id" title="var">Hh</span> <span class="id" title="var">Hd</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hd</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "ty_def_new".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="Definitions.html#trm_val"><span class="id" title="constructor">trm_val</span></a> (<a class="idref" href="Definitions.html#val_new"><span class="id" title="constructor">val_new</span></a> <span class="id" title="var">T0</span> <span class="id" title="var">ds0</span>)) <span class="id" title="var">ds</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>*.<br/>
&nbsp;&nbsp;<span class="id" title="var">fresh_constructor</span>. <span class="id" title="var">simpls</span>. <span class="id" title="var">lets</span> <span class="id" title="var">Hrs</span>: (<a class="idref" href="RecordAndInertTypes.html#record_has_sel_typ"><span class="id" title="lemma">record_has_sel_typ</span></a> <span class="id" title="var">Hx</span> <span class="id" title="var">Hr</span>). <span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#ty_rec_elim"><span class="id" title="constructor">ty_rec_elim</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Hrs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Admitted</span>. <span class="comment">(*<br/>
&nbsp;&nbsp;apply*&nbsp;renaming_def'.<br/>
Qed.<br/>
&nbsp;&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a name="lab56"></a><h1 class="section">Canonical Forms for Objects</h1>


<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="var">inert</span></span> <span class="inlinecode"><span class="id" title="var">G</span></span>            <br>
    <span class="inlinecode"><span class="id" title="var">s</span>:</span> <span class="inlinecode"><span class="id" title="var">G</span></span>             <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">x</span>:</span> <span class="inlinecode">{<span class="id" title="var">a</span>:<span class="id" title="var">T</span>}</span>             <br>
    <span class="inlinecode">――――――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode"><span class="id" title="var">S</span>,</span> <span class="inlinecode"><span class="id" title="var">ds</span>,</span> <span class="inlinecode"><span class="id" title="var">t</span>,</span> <br>
    <span class="inlinecode"><span class="id" title="var">s</span>(<span class="id" title="var">x</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">nu</span>(<span class="id" title="var">S</span>)<span class="id" title="var">ds</span></span> <br>
    <span class="inlinecode"><span class="id" title="var">ds</span>^<span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode">...</span> <span class="inlinecode">/\</span> <span class="inlinecode">{<span class="id" title="var">a</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">t</span>}</span> <span class="inlinecode">/\</span> <span class="inlinecode">...</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">t</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="canonical_forms_obj"><span class="id" title="lemma">canonical_forms_obj</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">G</span> <span class="id" title="var">s</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#well_typed"><span class="id" title="inductive">well_typed</span></a> <a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_path"><span class="id" title="constructor">trm_path</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> (<a class="idref" href="Definitions.html#dec_trm"><span class="id" title="constructor">dec_trm</span></a> <a class="idref" href="CanonicalForms.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a>) <span class="id" title="notation">-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">exists</span> <span class="id" title="var">ps</span> <span class="id" title="var">S</span> <span class="id" title="var">ds</span> <span class="id" title="var">t</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">∋</span></a> <span class="id" title="notation">(</span><a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a><span class="id" title="notation">,</span> <a class="idref" href="Definitions.html#val_new"><span class="id" title="constructor">val_new</span></a> <span class="id" title="var">S</span> <span class="id" title="var">ds</span><span class="id" title="notation">)</span> <a class="idref" href="Binding.html#756ae8405cffc1231511bc3a9759ed6c"><span class="id" title="notation">//</span></a> <span class="id" title="var">ps</span> <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#defs_has"><span class="id" title="definition">defs_has</span></a> (<a class="idref" href="Definitions.html#open_defs_p"><span class="id" title="definition">open_defs_p</span></a> <a class="idref" href="CanonicalForms.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="var">ds</span>) (<a class="idref" href="Definitions.html#def_trm"><span class="id" title="constructor">def_trm</span></a> <a class="idref" href="CanonicalForms.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="var">t</span>) <span class="id" title="notation">/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CanonicalForms.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">t</span> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <a class="idref" href="CanonicalForms.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Hty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#var_typ_rcd_to_binds"><span class="id" title="lemma">var_typ_rcd_to_binds</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hty</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">S</span> [<span class="id" title="var">T'</span> [<span class="id" title="var">V</span> [<span class="id" title="var">Bi</span> [<span class="id" title="var">Hr</span> <span class="id" title="var">Hs</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#corresponding_types"><span class="id" title="lemma">corresponding_types</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hwt</span> <span class="id" title="var">Bi</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> [<span class="id" title="var">P</span> [<span class="id" title="var">Bis</span> <span class="id" title="var">Ht</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Bieq</span>: (<a class="idref" href="PreciseTyping.html#pf_precise_U"><span class="id" title="lemma">pf_precise_U</span></a> <span class="id" title="var">Bi</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Bi'</span>: (<a class="idref" href="PreciseTyping.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a> <span class="id" title="var">Bieq</span>). <span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#ty_rec_elim"><span class="id" title="constructor">ty_rec_elim</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">Bi'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CanonicalForms.html#val_mu_to_new"><span class="id" title="axiom">val_mu_to_new</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Ht</span> <span class="id" title="var">Bi'</span> <span class="id" title="var">Hr</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">t</span> [<span class="id" title="var">ds</span> [<span class="id" title="var">Heq</span> [<span class="id" title="var">Hdefs</span> <span class="id" title="var">Ht'</span>]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">P</span> <span class="id" title="var">S</span> <span class="id" title="var">ds</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>~. <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#ty_sub"><span class="id" title="constructor">ty_sub</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
