<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="assets/resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="assets/resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="assets/resources/config.js"></script>
<script type="text/javascript" src="assets/resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://amaurremi.github.io/dot-calculus/src/extensions/paths/">README</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">InvertibleTyping</h1>

<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab55"></a><h1 class="section">Invertible (Introduction-pq) Typing</h1>

<div class="paragraph"> </div>

 This module contains lemmas related to invertible typing for paths and values
    (<span class="inlinecode">&vdash;<sub>&#35&#35</sub></span> and <span class="inlinecode">&vdash;<sub>&#35&#35</sub><span class="id" title="var">v</span></span>). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Coq.Program.Equality</span> <span class="id" title="library">List</span> <span class="id" title="library">String</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Sequences.html#"><span class="id" title="library">Sequences</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Definitions.html#"><span class="id" title="library">Definitions</span></a> <a class="idref" href="Binding.html#"><span class="id" title="library">Binding</span></a> <a class="idref" href="Narrowing.html#"><span class="id" title="library">Narrowing</span></a> <a class="idref" href="PreciseFlow.html#"><span class="id" title="library">PreciseFlow</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PreciseTyping.html#"><span class="id" title="library">PreciseTyping</span></a> <a class="idref" href="RecordAndInertTypes.html#"><span class="id" title="library">RecordAndInertTypes</span></a> <a class="idref" href="Replacement.html#"><span class="id" title="library">Replacement</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Subenvironments.html#"><span class="id" title="library">Subenvironments</span></a> <a class="idref" href="TightTyping.html#"><span class="id" title="library">TightTyping</span></a> <a class="idref" href="Weakening.html#"><span class="id" title="library">Weakening</span></a>.<br/>

<br/>
</div>

<div class="doc">
The invertible-typing relation describes the possible types that a variable or value
can be typed with in an inert context. For example, if <span class="inlinecode"><span class="id" title="var">G</span></span> is inert, <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!!!</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">{<span class="id" title="var">a</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span>}</span>,
and <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T'</span></span>, then <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">{<span class="id" title="var">a</span>:</span> <span class="inlinecode"><span class="id" title="var">T'</span>}</span>.

<div class="paragraph"> </div>

The purpose of invertible typing is to be easily invertible into a precise typing relation.
To achieve that, invertible typing avoids typing cycles that could result from, for example,
repeated applications of recursion introduction and elimination.
For this case, invertible typing defines only recursion introduction (whereas precise typing
defines only recursion elimination). Additionally, invertible typing is closed under
singleton-subtyping in one direction: if <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊢!</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">q.type</span></span> then singleton subtyping is
closed under replacement of <span class="inlinecode"><span class="id" title="var">p</span></span> with <span class="inlinecode"><span class="id" title="var">q</span></span>, but not under replacement of <span class="inlinecode"><span class="id" title="var">q</span></span> with <span class="inlinecode"><span class="id" title="var">p</span></span>, which
is taken care by <i>replacement typing</i> (⊢//, <span class="inlinecode"><span class="id" title="var">ty_repl</span></span>). 
<div class="paragraph"> </div>

<a name="lab56"></a><h2 class="section">Invertible typing of paths <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span></h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;G '⊢##' p ':' T" (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="var">p</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 59).<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="ty_path_inv"><span class="id" title="inductive">ty_path_inv</span></a> : <a class="idref" href="Definitions.html#ctx"><span class="id" title="definition">ctx</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Definitions.html#path"><span class="id" title="inductive">path</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Definitions.html#typ"><span class="id" title="inductive">typ</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">Prop</span> :=<br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!!!</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>     <br>
    <span class="inlinecode">―――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>     
</div>
<div class="code">
| <a name="ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">{<span class="id" title="var">a</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span>}</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢#</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">U</span></span>     <br>
    <span class="inlinecode">――――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">{<span class="id" title="var">a</span>:</span> <span class="inlinecode"><span class="id" title="var">U</span>}</span>     
</div>
<div class="code">
| <a name="ty_dec_trm_inv"><span class="id" title="constructor">ty_dec_trm_inv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#9c1437ad75c00cc7a2f69620b00a0e55"><span class="id" title="notation">{</span></a><a class="idref" href="InvertibleTyping.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Definitions.html#9c1437ad75c00cc7a2f69620b00a0e55"><span class="id" title="notation">⦂</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#9c1437ad75c00cc7a2f69620b00a0e55"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#ffeaea3f10fafc9fae0b394530b170ab"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="TightTyping.html#ffeaea3f10fafc9fae0b394530b170ab"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#9c1437ad75c00cc7a2f69620b00a0e55"><span class="id" title="notation">{</span></a><a class="idref" href="InvertibleTyping.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Definitions.html#9c1437ad75c00cc7a2f69620b00a0e55"><span class="id" title="notation">⦂</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a><a class="idref" href="Definitions.html#9c1437ad75c00cc7a2f69620b00a0e55"><span class="id" title="notation">}</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">{<span class="id" title="var">A</span>:</span> <span class="inlinecode"><span class="id" title="var">T1</span>..<span class="id" title="var">S1</span>}</span>   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢#</span> <span class="inlinecode"><span class="id" title="var">T2</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T1</span></span>         <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢#</span> <span class="inlinecode"><span class="id" title="var">S1</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">S2</span></span>         <br>
    <span class="inlinecode">―――――――――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">{<span class="id" title="var">A</span>:</span> <span class="inlinecode"><span class="id" title="var">T2</span>..<span class="id" title="var">S2</span>}</span>     
</div>
<div class="code">
| <a name="ty_dec_typ_inv"><span class="id" title="constructor">ty_dec_typ_inv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">A</span> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span> <span class="id" title="var">S1</span> <span class="id" title="var">S2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">{</span></a><a class="idref" href="InvertibleTyping.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="InvertibleTyping.html#T1"><span class="id" title="variable">T1</span></a> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="InvertibleTyping.html#S1"><span class="id" title="variable">S1</span></a><a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#ffeaea3f10fafc9fae0b394530b170ab"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="InvertibleTyping.html#T2"><span class="id" title="variable">T2</span></a> <a class="idref" href="TightTyping.html#ffeaea3f10fafc9fae0b394530b170ab"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="InvertibleTyping.html#T1"><span class="id" title="variable">T1</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#ffeaea3f10fafc9fae0b394530b170ab"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="InvertibleTyping.html#S1"><span class="id" title="variable">S1</span></a> <a class="idref" href="TightTyping.html#ffeaea3f10fafc9fae0b394530b170ab"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="InvertibleTyping.html#S2"><span class="id" title="variable">S2</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">{</span></a><a class="idref" href="InvertibleTyping.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="InvertibleTyping.html#T2"><span class="id" title="variable">T2</span></a> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="InvertibleTyping.html#S2"><span class="id" title="variable">S2</span></a><a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">}</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="keyword">∀</span>(<span class="id" title="var">S1</span>)<span class="id" title="var">T1</span></span>          <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢#</span> <span class="inlinecode"><span class="id" title="var">S2</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">S1</span></span>            <br>
    <span class="inlinecode"><span class="id" title="var">G</span>,</span> <span class="inlinecode"><span class="id" title="var">y</span>:</span> <span class="inlinecode"><span class="id" title="var">S2</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">T1</span>^<span class="id" title="var">y</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T2</span>^<span class="id" title="var">y</span></span>   <br>
    <span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode"><span class="id" title="tactic">fresh</span></span>                  <br>
    <span class="inlinecode">――――――――――――――――――――――</span>   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="keyword">∀</span>(<span class="id" title="var">S'</span>)<span class="id" title="var">T'</span></span>            
</div>
<div class="code">
| <a name="ty_all_inv"><span class="id" title="constructor">ty_all_inv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span> <span class="id" title="var">S1</span> <span class="id" title="var">S2</span> <span class="id" title="var">L</span> <span class="id" title="var">p</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#aa0c42e24884fb769ec058827958e802"><span class="id" title="notation">∀(</span></a><a class="idref" href="InvertibleTyping.html#S1"><span class="id" title="variable">S1</span></a><a class="idref" href="Definitions.html#aa0c42e24884fb769ec058827958e802"><span class="id" title="notation">)</span></a> <a class="idref" href="InvertibleTyping.html#T1"><span class="id" title="variable">T1</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#ffeaea3f10fafc9fae0b394530b170ab"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="InvertibleTyping.html#S2"><span class="id" title="variable">S2</span></a> <a class="idref" href="TightTyping.html#ffeaea3f10fafc9fae0b394530b170ab"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="InvertibleTyping.html#S1"><span class="id" title="variable">S1</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <span class="id" title="var">y</span>, <a class="idref" href="InvertibleTyping.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="InvertibleTyping.html#L"><span class="id" title="variable">L</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="InvertibleTyping.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="InvertibleTyping.html#S2"><span class="id" title="variable">S2</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="InvertibleTyping.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="InvertibleTyping.html#T1"><span class="id" title="variable">T1</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="InvertibleTyping.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="InvertibleTyping.html#T2"><span class="id" title="variable">T2</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#aa0c42e24884fb769ec058827958e802"><span class="id" title="notation">∀(</span></a><a class="idref" href="InvertibleTyping.html#S2"><span class="id" title="variable">S2</span></a><a class="idref" href="Definitions.html#aa0c42e24884fb769ec058827958e802"><span class="id" title="notation">)</span></a> <a class="idref" href="InvertibleTyping.html#T2"><span class="id" title="variable">T2</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>     <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">U</span></span>     <br>
    <span class="inlinecode">――――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">U</span></span>      
</div>
<div class="code">
| <a name="ty_and_inv"><span class="id" title="constructor">ty_and_inv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">S1</span> <span class="id" title="var">S2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#S1"><span class="id" title="variable">S1</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#S2"><span class="id" title="variable">S2</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#S1"><span class="id" title="variable">S1</span></a> <a class="idref" href="Definitions.html#efa0fee9c5478494e5127e94d3542ee0"><span class="id" title="notation">∧</span></a> <a class="idref" href="InvertibleTyping.html#S2"><span class="id" title="variable">S2</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span></span>   <br>
    <span class="inlinecode">―――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">top</span></span>     
</div>
<div class="code">
| <a name="ty_top_inv"><span class="id" title="constructor">ty_top_inv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#bea38521e04ba10a34529a2ec1d696bc"><span class="id" title="notation">⊤</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p.a</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>    <br>
    <span class="inlinecode">―――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">{<span class="id" title="var">a</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span>}</span>     
</div>
<div class="code">
| <a name="ty_rcd_intro_inv"><span class="id" title="constructor">ty_rcd_intro_inv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="Definitions.html#01e76694699a3667b35d72d15d0d8c1a"><span class="id" title="notation">•</span></a><a class="idref" href="InvertibleTyping.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#9c1437ad75c00cc7a2f69620b00a0e55"><span class="id" title="notation">{</span></a> <a class="idref" href="InvertibleTyping.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Definitions.html#9c1437ad75c00cc7a2f69620b00a0e55"><span class="id" title="notation">⦂</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#9c1437ad75c00cc7a2f69620b00a0e55"><span class="id" title="notation">}</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">q.type</span></span> <span class="inlinecode">⪼</span> <span class="inlinecode"><span class="id" title="var">q.type</span></span>   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!!</span> <span class="inlinecode"><span class="id" title="var">q</span></span>                   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">r</span>:</span> <span class="inlinecode"><span class="id" title="var">μ</span>(<span class="id" title="var">T</span>)</span>             <br>
    <span class="inlinecode">――――――――――――――――――――</span>      <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">μ</span>(<span class="id" title="var">T</span>[<span class="id" title="var">q</span>/<span class="id" title="var">p</span>,<span class="id" title="var">n</span>])</span>      
</div>
<div class="code">
| <a name="ty_rec_pq_inv"><span class="id" title="constructor">ty_rec_pq_inv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">n</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#77a356e00f708305a2c1675554d2ec98"><span class="id" title="notation">μ</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="InvertibleTyping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="InvertibleTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#77a356e00f708305a2c1675554d2ec98"><span class="id" title="notation">μ</span></a> <a class="idref" href="InvertibleTyping.html#T'"><span class="id" title="variable">T'</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">q.type</span></span> <span class="inlinecode">⪼</span> <span class="inlinecode"><span class="id" title="var">q.type</span></span>   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!!</span> <span class="inlinecode"><span class="id" title="var">q</span></span>                   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">r</span>:</span> <span class="inlinecode"><span class="id" title="var">r'.A</span></span>             <br>
    <span class="inlinecode">――――――――――――――――――――</span>      <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">(<span class="id" title="var">r'.A</span>)[<span class="id" title="var">q</span>/<span class="id" title="var">p</span>,<span class="id" title="var">n</span>]</span>      
</div>
<div class="code">
| <a name="ty_sel_pq_inv"><span class="id" title="constructor">ty_sel_pq_inv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">r'</span> <span class="id" title="var">r''</span> <span class="id" title="var">A</span> <span class="id" title="var">n</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#r'"><span class="id" title="variable">r'</span></a><a class="idref" href="Definitions.html#1567b6035e32564f35b85dde67cc70e6"><span class="id" title="notation">↓</span></a><a class="idref" href="InvertibleTyping.html#A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="InvertibleTyping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> (<a class="idref" href="InvertibleTyping.html#r'"><span class="id" title="variable">r'</span></a><a class="idref" href="Definitions.html#1567b6035e32564f35b85dde67cc70e6"><span class="id" title="notation">↓</span></a><a class="idref" href="InvertibleTyping.html#A"><span class="id" title="variable">A</span></a>) (<a class="idref" href="InvertibleTyping.html#r''"><span class="id" title="variable">r''</span></a><a class="idref" href="Definitions.html#1567b6035e32564f35b85dde67cc70e6"><span class="id" title="notation">↓</span></a><a class="idref" href="InvertibleTyping.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#r''"><span class="id" title="variable">r''</span></a><a class="idref" href="Definitions.html#1567b6035e32564f35b85dde67cc70e6"><span class="id" title="notation">↓</span></a><a class="idref" href="InvertibleTyping.html#A"><span class="id" title="variable">A</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">q.type</span></span> <span class="inlinecode">⪼</span> <span class="inlinecode"><span class="id" title="var">q.type</span></span>   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!!</span> <span class="inlinecode"><span class="id" title="var">q</span></span>                   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">r</span>:</span> <span class="inlinecode"><span class="id" title="var">r'.type</span></span>          <br>
    <span class="inlinecode">――――――――――――――――――――</span>      <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">(<span class="id" title="var">r'.type</span>)[<span class="id" title="var">q</span>/<span class="id" title="var">p</span>,<span class="id" title="var">n</span>]</span>      
</div>
<div class="code">
| <a name="ty_sngl_pq_inv"><span class="id" title="constructor">ty_sngl_pq_inv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">r'</span> <span class="id" title="var">r''</span> <span class="id" title="var">n</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r'"><span class="id" title="variable">r'</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="InvertibleTyping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r'"><span class="id" title="variable">r'</span></a><a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r''"><span class="id" title="variable">r''</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r''"><span class="id" title="variable">r''</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a><br/>
<br/>
<span class="id" title="keyword">where</span> <a name="6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">&quot;</span></a>G '⊢##' p ':' T" := (<a class="idref" href="InvertibleTyping.html#ty_path_inv"><span class="id" title="inductive">ty_path_inv</span></a> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span>).<br/>

<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="InvertibleTyping.html#ty_path_inv"><span class="id" title="inductive">ty_path_inv</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab57"></a><h3 class="section">From Invertible to Precise Typing</h3>

<div class="paragraph"> </div>

 Invertible-to-precise typing for function types: <br>
    <span class="inlinecode"><span class="id" title="var">ok</span></span> <span class="inlinecode"><span class="id" title="var">G</span></span>                        <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="keyword">∀</span>(<span class="id" title="var">S</span>)<span class="id" title="var">T</span></span>             <br>
    <span class="inlinecode">――――――――――――――――――――――――――</span>  <br>
    <span class="inlinecode"><span class="id" title="tactic">∃</span></span> <span class="inlinecode"><span class="id" title="var">S'</span>,</span> <span class="inlinecode"><span class="id" title="var">T'</span>.</span> <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!!!</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="keyword">∀</span>(<span class="id" title="var">S'</span>)<span class="id" title="var">T'</span></span>  <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢#</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">S'</span></span>               <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢#</span> <span class="inlinecode"><span class="id" title="var">T'</span>^<span class="id" title="var">y</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T</span>^<span class="id" title="var">y</span></span>, where <span class="inlinecode"><span class="id" title="var">y</span></span> is fresh. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="invertible_to_precise_typ_all"><span class="id" title="lemma">invertible_to_precise_typ_all</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#aa0c42e24884fb769ec058827958e802"><span class="id" title="notation">∀(</span></a><a class="idref" href="InvertibleTyping.html#S"><span class="id" title="variable">S</span></a><a class="idref" href="Definitions.html#aa0c42e24884fb769ec058827958e802"><span class="id" title="notation">)</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">S'</span> <span class="id" title="var">T'</span> <span class="id" title="var">L</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#aa0c42e24884fb769ec058827958e802"><span class="id" title="notation">∀(</span></a><a class="idref" href="InvertibleTyping.html#S'"><span class="id" title="variable">S'</span></a><a class="idref" href="Definitions.html#aa0c42e24884fb769ec058827958e802"><span class="id" title="notation">)</span></a> <a class="idref" href="InvertibleTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#ffeaea3f10fafc9fae0b394530b170ab"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="InvertibleTyping.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="TightTyping.html#ffeaea3f10fafc9fae0b394530b170ab"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="InvertibleTyping.html#S'"><span class="id" title="variable">S'</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <span class="id" title="var">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="InvertibleTyping.html#L"><span class="id" title="variable">L</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="InvertibleTyping.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="InvertibleTyping.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="InvertibleTyping.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="InvertibleTyping.html#T'"><span class="id" title="variable">T'</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="InvertibleTyping.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hinv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hinv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">∃</span> (<span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>). <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHinv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHHinv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">S'</span> [<span class="id" title="var">T'</span> [<span class="id" title="var">L'</span> [<span class="id" title="var">Hp</span> [<span class="id" title="var">Hs1</span> <span class="id" title="var">Hs</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span>  <span class="id" title="var">S'</span> <span class="id" title="var">T'</span> (<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">L'</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>). <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Narrowing.html#narrow_subtyping"><span class="id" title="lemma">narrow_subtyping</span></a>. <span class="id" title="tactic">apply</span>× <span class="id" title="var">Hs</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Subenvironments.html#subenv_last"><span class="id" title="lemma">subenv_last</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="TightTyping.html#tight_to_general"><span class="id" title="lemma">tight_to_general</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <span class="id" title="constructor">ok_push</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Invertible-to-precise typing for records:
    <span class="inlinecode"><span class="id" title="var">inert</span></span> <span class="inlinecode"><span class="id" title="var">G</span></span>                    <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">&vdash;<sub>&#35&#35</sub></span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">{<span class="id" title="var">A</span>:</span> <span class="inlinecode"><span class="id" title="var">S</span>..<span class="id" title="var">U</span>}</span>        <br>
    <span class="inlinecode">――――――――――――――――――――――――――――</span>   <br>
    <span class="inlinecode"><span class="id" title="tactic">∃</span></span> <span class="inlinecode"><span class="id" title="var">T</span>.</span> <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">&vdash;<sub>&#35&#35</sub></span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">{<span class="id" title="var">A</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span>..<span class="id" title="var">T</span>}</span>   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">&vdash;<sub>&#35;</sub></span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">U</span></span>               <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">&vdash;<sub>&#35;</sub></span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>                    
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="invertible_to_precise_rcd"><span class="id" title="lemma">invertible_to_precise_rcd</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">A</span> <span class="id" title="var">S</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">{</span></a><a class="idref" href="InvertibleTyping.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="InvertibleTyping.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a><a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">T</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">{</span></a><a class="idref" href="InvertibleTyping.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">}</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#ffeaea3f10fafc9fae0b394530b170ab"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="TightTyping.html#ffeaea3f10fafc9fae0b394530b170ab"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#ffeaea3f10fafc9fae0b394530b170ab"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="InvertibleTyping.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="TightTyping.html#ffeaea3f10fafc9fae0b394530b170ab"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">HG</span> <span class="id" title="var">Hinv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hinv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">lets</span> <span class="id" title="var">Hp</span>: (<a class="idref" href="PreciseTyping.html#pt3_dec_typ_tight"><span class="id" title="lemma">pt3_dec_typ_tight</span></a> <span class="id" title="var">HG</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">split</span>×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHinv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HG</span> <span class="id" title="constructor">eq_refl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHHinv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">V</span> [<span class="id" title="var">Hx</span> [<span class="id" title="var">Hs1</span> <span class="id" title="var">Hs2</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">V</span>. <span class="id" title="tactic">split</span>×.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab58"></a><h3 class="section">Invertible Replacement Closure</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">solve_names</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <span class="id" title="var">_</span> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⊢!</span></a> ?<span class="id" title="var">p</span> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⪼</span></a> <span class="id" title="var">_</span> |- <a class="idref" href="Binding.html#named_path"><span class="id" title="definition">named_path</span></a> ?<span class="id" title="var">p</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <span class="id" title="var">_</span> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">⊢!!!</span></a> ?<span class="id" title="var">p</span> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> |- <a class="idref" href="Binding.html#named_path"><span class="id" title="definition">named_path</span></a> ?<span class="id" title="var">p</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#precise_to_general3"><span class="id" title="lemma">precise_to_general3</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <span class="id" title="var">_</span> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">⊢!!</span></a> ?<span class="id" title="var">p</span> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> |- <a class="idref" href="Binding.html#named_path"><span class="id" title="definition">named_path</span></a> ?<span class="id" title="var">p</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span>: <span class="id" title="var">_</span> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#trm_path"><span class="id" title="constructor">trm_path</span></a> ?<span class="id" title="var">p</span> <a class="idref" href="Definitions.html#475d58042806a5294f9ce6903e16f6d3"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> |- <a class="idref" href="Binding.html#named_path"><span class="id" title="definition">named_path</span></a> ?<span class="id" title="var">p</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Subtyping between equivalent types in which the paths 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="repl_sub"><span class="id" title="lemma">repl_sub</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span> <span class="id" title="var">n</span> <span class="id" title="var">V</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="InvertibleTyping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a><a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#V"><span class="id" title="variable">V</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#ffeaea3f10fafc9fae0b394530b170ab"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="TightTyping.html#ffeaea3f10fafc9fae0b394530b170ab"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hpq</span> <span class="id" title="var">Hq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Subtyping between equivalent types formulated without precise typing 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="repl_composition_sub"><span class="id" title="lemma">repl_composition_sub</span></a> <span class="id" title="var">G</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#b7384b88c1af5dcf2d38b3c5a6389e24"><span class="id" title="notation">⊢</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="PreciseTyping.html#b7384b88c1af5dcf2d38b3c5a6389e24"><span class="id" title="notation">⟿</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">⊢</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">⊢</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">q</span> [<span class="id" title="var">r</span> [<span class="id" title="var">n</span> [<span class="id" title="var">S</span> [<span class="id" title="var">Hq</span>%<a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a> [<span class="id" title="var">Hq'</span> <span class="id" title="var">Hrt</span>]]]]]]. <span class="id" title="var">destruct_all</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Definitions.html#subtyp_sngl_qp"><span class="id" title="constructor">subtyp_sngl_qp</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrt</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_sngl_pq"><span class="id" title="constructor">subtyp_sngl_pq</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">solve_repl_sub</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">apply</span>× <a class="idref" href="TightTyping.html#tight_to_general"><span class="id" title="lemma">tight_to_general</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#repl_sub"><span class="id" title="lemma">repl_sub</span></a>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>

<br/>
</div>

<div class="doc">
Singleton-subtyping closure for inert and record types:
    If <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊢!!!</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> and <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊢!</span> <span class="inlinecode"><span class="id" title="var">q</span>:</span> <span class="inlinecode"><span class="id" title="var">r.type</span></span> then <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span>[<span class="id" title="var">r</span>/<span class="id" title="var">q</span>,<span class="id" title="var">n</span>]</span> 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="invertible_repl_closure_helper"><span class="id" title="lemma">invertible_repl_closure_helper</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <span class="id" title="var">D</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_dec"><span class="id" title="inductive">record_dec</span></a> <a class="idref" href="InvertibleTyping.html#D"><span class="id" title="variable">D</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">D'</span> <span class="id" title="var">n</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="InvertibleTyping.html#D"><span class="id" title="variable">D</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_dec"><span class="id" title="inductive">repl_dec</span></a> <a class="idref" href="InvertibleTyping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="InvertibleTyping.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="InvertibleTyping.html#D'"><span class="id" title="variable">D'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="InvertibleTyping.html#D'"><span class="id" title="variable">D'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <span class="id" title="var">U</span> <span class="id" title="var">ls</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_typ"><span class="id" title="inductive">record_typ</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="InvertibleTyping.html#ls"><span class="id" title="variable">ls</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">U'</span> <span class="id" title="var">n</span> <span class="id" title="var">V</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#V"><span class="id" title="variable">V</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="InvertibleTyping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="InvertibleTyping.html#U'"><span class="id" title="variable">U'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#U'"><span class="id" title="variable">U'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert_typ"><span class="id" title="inductive">inert_typ</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">U'</span> <span class="id" title="var">n</span> <span class="id" title="var">V</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#V"><span class="id" title="variable">V</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="InvertibleTyping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="InvertibleTyping.html#U'"><span class="id" title="variable">U'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#U'"><span class="id" title="variable">U'</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#rcd_mutind"><span class="id" title="definition">rcd_mutind</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_dec_typ_inv"><span class="id" title="constructor">ty_dec_typ_inv</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_repl_sub</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="var">solve_repl_sub</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_dec_trm_inv"><span class="id" title="constructor">ty_dec_trm_inv</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_dec_trm_inv"><span class="id" title="constructor">ty_dec_trm_inv</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_and_inv"><span class="id" title="constructor">ty_and_inv</span></a>. <span class="id" title="tactic">apply</span>× <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_and_destruct1"><span class="id" title="lemma">pt3_and_destruct1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#pt3_and_destruct2"><span class="id" title="lemma">pt3_and_destruct2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#pt3_and_destruct1"><span class="id" title="lemma">pt3_and_destruct1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#pt3_and_destruct2"><span class="id" title="lemma">pt3_and_destruct2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> (<a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a> <span class="id" title="var">H1</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_all_inv"><span class="id" title="constructor">ty_all_inv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span>:=<span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>). <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H10</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> (<a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a> <span class="id" title="var">H2</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Ho</span>: (<a class="idref" href="Replacement.html#repl_open_var"><span class="id" title="lemma">repl_open_var</span></a> <span class="id" title="var">y</span> <span class="id" title="var">H10</span> <span class="id" title="var">Ht</span> <span class="id" title="var">Hs</span>). <span class="id" title="tactic">eapply</span> <a class="idref" href="Weakening.html#weaken_subtyp"><span class="id" title="lemma">weaken_subtyp</span></a>. <span class="id" title="var">solve_repl_sub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <span class="id" title="constructor">ok_push</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Singleton-subtyping closure for invertible typing:
    If <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> and <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊢!</span> <span class="inlinecode"><span class="id" title="var">q</span>:</span> <span class="inlinecode"><span class="id" title="var">r.type</span></span> then <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span>[<span class="id" title="var">r</span>/<span class="id" title="var">q</span>,<span class="id" title="var">n</span>]</span> 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="invertible_repl_closure"><span class="id" title="lemma">invertible_repl_closure</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">n</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="InvertibleTyping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="InvertibleTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T'"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hqr</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hrep</span>. <span class="id" title="var">gen</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T'</span> <span class="id" title="var">n</span> <span class="id" title="var">U</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hrep</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_precise_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="PreciseTyping.html#pt3_inertsngl"><span class="id" title="lemma">pt3_inertsngl</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hin</span> | <span class="id" title="var">Hs</span>] | <span class="id" title="var">Hr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">inversions</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#invertible_repl_closure_helper"><span class="id" title="lemma">invertible_repl_closure_helper</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">inversions</span> <span class="id" title="var">Hs</span>. <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">inversions</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">eapply</span> (<span class="id" title="notation">proj32</span> <a class="idref" href="InvertibleTyping.html#invertible_repl_closure_helper"><span class="id" title="lemma">invertible_repl_closure_helper</span></a>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_dec_trm_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_dec_trm_inv"><span class="id" title="constructor">ty_dec_trm_inv</span></a>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_trans_t"><span class="id" title="constructor">subtyp_trans_t</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_dec_typ_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_dec_typ_inv"><span class="id" title="constructor">ty_dec_typ_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_trans_t"><span class="id" title="constructor">subtyp_trans_t</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H9</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_trans_t"><span class="id" title="constructor">subtyp_trans_t</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="TightTyping.html#subtyp_sngl_qp_t"><span class="id" title="constructor">subtyp_sngl_qp_t</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_trans_t"><span class="id" title="constructor">subtyp_trans_t</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_all_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_all_inv"><span class="id" title="constructor">ty_all_inv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span>:=<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="TightTyping.html#subtyp_trans_t"><span class="id" title="constructor">subtyp_trans_t</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">T</span>:=<span class="id" title="var">S2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Narrowing.html#narrow_subtyping"><span class="id" title="lemma">narrow_subtyping</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="TightTyping.html#tight_to_general"><span class="id" title="lemma">tight_to_general</span></a>. <span class="id" title="var">solve_repl_sub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_all_inv"><span class="id" title="constructor">ty_all_inv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span>:=<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a>. <span class="id" title="tactic">apply</span>× <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Replacement.html#repl_open_var"><span class="id" title="lemma">repl_open_var</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">solve_names</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_sngl_pq"><span class="id" title="constructor">subtyp_sngl_pq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_and_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_top_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_rec_pq_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_rcd_intro_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_pq_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="notation">∃</span> <span class="id" title="var">r'''</span><span class="id" title="notation">,</span> <span class="id" title="var">T'</span> <span class="id" title="notation">=</span> <a class="idref" href="InvertibleTyping.html#r'''"><span class="id" title="variable">r'''</span></a><a class="idref" href="Definitions.html#1567b6035e32564f35b85dde67cc70e6"><span class="id" title="notation">↓</span></a><span class="id" title="var">A</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">r'''</span> <span class="id" title="var">Heq</span>]. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;} <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Replacement.html#repl_prefixes_sel"><span class="id" title="lemma">repl_prefixes_sel</span></a> <span class="id" title="var">Hrep</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">bs</span> [<span class="id" title="var">He1</span> <span class="id" title="var">He2</span>]]. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Replacement.html#repl_prefixes_sel"><span class="id" title="lemma">repl_prefixes_sel</span></a> <span class="id" title="var">H1</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">cs</span> [<span class="id" title="var">He1</span> <span class="id" title="var">He2</span>]]. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">Hi</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span>). <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sngl_qp_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="notation">∃</span> <span class="id" title="var">r'''</span><span class="id" title="notation">,</span> <span class="id" title="var">T'</span> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r'''"><span class="id" title="variable">r'''</span></a><a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">r'''</span> <span class="id" title="var">Heq</span>]. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;} <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Replacement.html#repl_prefixes_sngl"><span class="id" title="lemma">repl_prefixes_sngl</span></a> <span class="id" title="var">Hrep</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">bs</span> [-&gt; -&gt;]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span>× (<a class="idref" href="Replacement.html#repl_prefixes_sngl"><span class="id" title="lemma">repl_prefixes_sngl</span></a> <span class="id" title="var">H1</span>) <span class="id" title="keyword">as</span> [? [? ?]].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab59"></a><h3 class="section">Properties of invertible typing</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="invertible_bot"><span class="id" title="lemma">invertible_bot</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#bb4d87379c428696b2d63c8c5979a5b1"><span class="id" title="notation">⊥</span></a> <span class="id" title="notation">→</span> <span class="id" title="inductive">False</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">false</span>× <a class="idref" href="PreciseFlow.html#pf_bot"><span class="id" title="lemma">pf_bot</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="invertible_and"><span class="id" title="lemma">invertible_and</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#efa0fee9c5478494e5127e94d3542ee0"><span class="id" title="notation">∧</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#pt3_and_destruct1"><span class="id" title="lemma">pt3_and_destruct1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#pt3_and_destruct2"><span class="id" title="lemma">pt3_and_destruct2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="invertible_bnd"><span class="id" title="lemma">invertible_bnd</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#77a356e00f708305a2c1675554d2ec98"><span class="id" title="notation">μ</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">∨</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <span class="id" title="var">q</span> <span class="id" title="var">U</span><span class="id" title="notation">,</span> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="PreciseTyping.html#pt3_bnd"><span class="id" title="lemma">pt3_bnd</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hp</span> | [<span class="id" title="var">q</span> [<span class="id" title="var">U</span> [<span class="id" title="var">Hp1</span> [<span class="id" title="var">Hq</span> <span class="id" title="var">Hp2</span>]]]]]. <span class="id" title="tactic">left</span>×. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hr</span> | [<span class="id" title="var">q'</span> [<span class="id" title="var">S</span> [<span class="id" title="var">Hr</span> [<span class="id" title="var">Hq</span> <span class="id" title="var">Hr'</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#invertible_repl_closure"><span class="id" title="lemma">invertible_repl_closure</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_open"><span class="id" title="lemma">repl_open</span></a>; <span class="id" title="var">solve_names</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">right</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_open"><span class="id" title="lemma">repl_open</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">r</span>:=<span class="id" title="var">q'</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hq</span>. <span class="id" title="var">solve_names</span>. <span class="id" title="var">solve_names</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#invertible_repl_closure"><span class="id" title="lemma">invertible_repl_closure</span></a>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hr'</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_open"><span class="id" title="lemma">repl_open</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">solve_names</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="path_sel_inv"><span class="id" title="lemma">path_sel_inv</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">A</span> <span class="id" title="var">T</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">{</span></a><a class="idref" href="InvertibleTyping.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="Definitions.html#1567b6035e32564f35b85dde67cc70e6"><span class="id" title="notation">↓</span></a><a class="idref" href="InvertibleTyping.html#A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_precise_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">false</span>× <a class="idref" href="PreciseTyping.html#pt3_psel"><span class="id" title="lemma">pt3_psel</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_pq_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Replacement.html#repl_prefixes_sel"><span class="id" title="lemma">repl_prefixes_sel</span></a> <span class="id" title="var">H1</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">bs</span> [<span class="id" title="var">Heq1</span> <span class="id" title="var">Heq2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hh</span>: (<a class="idref" href="PreciseTyping.html#pt3_field_trans'"><span class="id" title="lemma">pt3_field_trans'</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> (<a class="idref" href="PreciseTyping.html#pt3"><span class="id" title="constructor">pt3</span></a> (<a class="idref" href="PreciseTyping.html#pt2"><span class="id" title="constructor">pt2</span></a> <span class="id" title="var">H</span>)) <span class="id" title="var">Hp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHq</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hh</span> <span class="id" title="constructor">eq_refl</span>). <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="invertible_repl_closure_comp_typed"><span class="id" title="lemma">invertible_repl_closure_comp_typed</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#b7384b88c1af5dcf2d38b3c5a6389e24"><span class="id" title="notation">⊢</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="PreciseTyping.html#b7384b88c1af5dcf2d38b3c5a6389e24"><span class="id" title="notation">⟿</span></a> <a class="idref" href="InvertibleTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T'"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p'</span> [<span class="id" title="var">q'</span> [<span class="id" title="var">n</span> [<span class="id" title="var">Hpq</span> <span class="id" title="var">Hr'</span>]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#invertible_repl_closure"><span class="id" title="lemma">invertible_repl_closure</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="inv_to_precise_sngl_repl_comp"><span class="id" title="lemma">inv_to_precise_sngl_repl_comp</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">r</span><span class="id" title="notation">,</span> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#14038bac146af6e202b2ec3d0639b1a6"><span class="id" title="notation">⊢</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#14038bac146af6e202b2ec3d0639b1a6"><span class="id" title="notation">⟿'</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">∃</span> <span class="id" title="var">q</span>. <span class="id" title="tactic">split</span>×. <span class="id" title="tactic">apply</span> <a class="idref" href="Sequences.html#star_refl"><span class="id" title="constructor">star_refl</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="constructor">eq_refl</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHHp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">r''</span> [<span class="id" title="var">Hr'</span> <span class="id" title="var">Hc'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">r''</span>. <span class="id" title="tactic">split</span>×. <span class="id" title="tactic">eapply</span> <a class="idref" href="Sequences.html#star_trans"><span class="id" title="lemma">star_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Sequences.html#star_one"><span class="id" title="lemma">star_one</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="PreciseTyping.html#typed_repl_comp_qp"><span class="id" title="definition">typed_repl_comp_qp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="inv_to_precise_sngl"><span class="id" title="lemma">inv_to_precise_sngl</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">r</span><span class="id" title="notation">,</span> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">∧</span> <span class="id" title="notation">(</span><a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <span class="id" title="notation">=</span> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <span class="id" title="notation">∨</span> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a><a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="InvertibleTyping.html#inv_to_precise_sngl_repl_comp"><span class="id" title="lemma">inv_to_precise_sngl_repl_comp</span></a> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> [<span class="id" title="var">Hpr</span> <span class="id" title="var">Hrc</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">r</span>. <span class="id" title="tactic">split</span>×. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">gen</span> <span class="id" title="var">p</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hrc</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hpr</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hq</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">r1</span> [<span class="id" title="var">r2</span> [<span class="id" title="var">n</span> [<span class="id" title="var">V</span> [<span class="id" title="var">Hr1</span> [<span class="id" title="var">Hqr2</span> <span class="id" title="var">Hr</span>]]]]]]. <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt3_field_trans"><span class="id" title="lemma">pt3_field_trans</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> (<a class="idref" href="PreciseTyping.html#pt3"><span class="id" title="constructor">pt3</span></a> (<a class="idref" href="PreciseTyping.html#pt2"><span class="id" title="constructor">pt2</span></a> <span class="id" title="var">Hr1</span>)) <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hr1bs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHrc</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">_</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">_</span> <span class="id" title="var">Hpr</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr1bs</span>) <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">Hr1r2</span>]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a path has an invertible type it also has a III-level precise type. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="inv_to_prec"><span class="id" title="lemma">inv_to_prec</span></a> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#6a4a74f7d21fd497fcdb310d1532b15d"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">U</span><span class="id" title="notation">,</span> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHty_path_inv</span> <span class="id" title="keyword">as</span> [? ?]. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_backtrack"><span class="id" title="lemma">pt3_backtrack</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab60"></a><h2 class="section">Invertible typing for values</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;G '⊢##v' v ':' T" (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="var">v</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 59).<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="ty_val_inv"><span class="id" title="inductive">ty_val_inv</span></a> : <a class="idref" href="Definitions.html#ctx"><span class="id" title="definition">ctx</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Definitions.html#val"><span class="id" title="inductive">val</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Definitions.html#typ"><span class="id" title="inductive">typ</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">Prop</span> :=<br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">qs</span></span> <span class="inlinecode">⪼</span> <span class="inlinecode"><span class="id" title="var">T</span></span>  <br>
    <span class="inlinecode">―――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>     
</div>
<div class="code">
| <a name="ty_precise_invv"><span class="id" title="constructor">ty_precise_invv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">⊢!</span></a><a class="idref" href="PreciseFlow.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="PreciseFlow.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a><br/>
<br/>
| <a name="ty_all_invv"><span class="id" title="constructor">ty_all_invv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span> <span class="id" title="var">S1</span> <span class="id" title="var">S2</span> <span class="id" title="var">L</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#aa0c42e24884fb769ec058827958e802"><span class="id" title="notation">∀(</span></a><a class="idref" href="InvertibleTyping.html#S1"><span class="id" title="variable">S1</span></a><a class="idref" href="Definitions.html#aa0c42e24884fb769ec058827958e802"><span class="id" title="notation">)</span></a> <a class="idref" href="InvertibleTyping.html#T1"><span class="id" title="variable">T1</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#ffeaea3f10fafc9fae0b394530b170ab"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="InvertibleTyping.html#S2"><span class="id" title="variable">S2</span></a> <a class="idref" href="TightTyping.html#ffeaea3f10fafc9fae0b394530b170ab"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="InvertibleTyping.html#S1"><span class="id" title="variable">S1</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <span class="id" title="var">y</span>, <a class="idref" href="InvertibleTyping.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="InvertibleTyping.html#L"><span class="id" title="variable">L</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="InvertibleTyping.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="InvertibleTyping.html#S2"><span class="id" title="variable">S2</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="InvertibleTyping.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="InvertibleTyping.html#T1"><span class="id" title="variable">T1</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="InvertibleTyping.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="InvertibleTyping.html#T2"><span class="id" title="variable">T2</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#aa0c42e24884fb769ec058827958e802"><span class="id" title="notation">∀(</span></a><a class="idref" href="InvertibleTyping.html#S2"><span class="id" title="variable">S2</span></a><a class="idref" href="Definitions.html#aa0c42e24884fb769ec058827958e802"><span class="id" title="notation">)</span></a> <a class="idref" href="InvertibleTyping.html#T2"><span class="id" title="variable">T2</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>     <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">U</span></span>     <br>
    <span class="inlinecode">――――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">U</span></span>      
</div>
<div class="code">
| <a name="ty_and_invv"><span class="id" title="constructor">ty_and_invv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">S1</span> <span class="id" title="var">S2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#S1"><span class="id" title="variable">S1</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#S2"><span class="id" title="variable">S2</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#S1"><span class="id" title="variable">S1</span></a> <a class="idref" href="Definitions.html#efa0fee9c5478494e5127e94d3542ee0"><span class="id" title="notation">∧</span></a> <a class="idref" href="InvertibleTyping.html#S2"><span class="id" title="variable">S2</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>   <br>
    <span class="inlinecode">―――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">top</span></span>     
</div>
<div class="code">
| <a name="ty_top_invv"><span class="id" title="constructor">ty_top_invv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#bea38521e04ba10a34529a2ec1d696bc"><span class="id" title="notation">⊤</span></a><br/>
<br/>
| <a name="ty_rec_pq_invv"><span class="id" title="constructor">ty_rec_pq_invv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">n</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#77a356e00f708305a2c1675554d2ec98"><span class="id" title="notation">μ</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="InvertibleTyping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="InvertibleTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#77a356e00f708305a2c1675554d2ec98"><span class="id" title="notation">μ</span></a> <a class="idref" href="InvertibleTyping.html#T'"><span class="id" title="variable">T'</span></a><br/>
<br/>
<span class="id" title="keyword">where</span> <a name="84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">&quot;</span></a>G '⊢##v' v ':' T" := (<a class="idref" href="InvertibleTyping.html#ty_val_inv"><span class="id" title="inductive">ty_val_inv</span></a> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span>).<br/>

<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="InvertibleTyping.html#ty_val_inv"><span class="id" title="inductive">ty_val_inv</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="invertible_repl_closure_v_helper"><span class="id" title="lemma">invertible_repl_closure_v_helper</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <span class="id" title="var">D</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_dec"><span class="id" title="inductive">record_dec</span></a> <a class="idref" href="InvertibleTyping.html#D"><span class="id" title="variable">D</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">D'</span> <span class="id" title="var">n</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">⊢!</span></a><a class="idref" href="PreciseFlow.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="PreciseFlow.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="InvertibleTyping.html#D"><span class="id" title="variable">D</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_dec"><span class="id" title="inductive">repl_dec</span></a> <a class="idref" href="InvertibleTyping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="InvertibleTyping.html#D"><span class="id" title="variable">D</span></a> <a class="idref" href="InvertibleTyping.html#D'"><span class="id" title="variable">D'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="InvertibleTyping.html#D'"><span class="id" title="variable">D'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <span class="id" title="var">U</span> <span class="id" title="var">ls</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_typ"><span class="id" title="inductive">record_typ</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="InvertibleTyping.html#ls"><span class="id" title="variable">ls</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">U'</span> <span class="id" title="var">n</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">⊢!</span></a><a class="idref" href="PreciseFlow.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="PreciseFlow.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="InvertibleTyping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="InvertibleTyping.html#U'"><span class="id" title="variable">U'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#U'"><span class="id" title="variable">U'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert_typ"><span class="id" title="inductive">inert_typ</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">U'</span> <span class="id" title="var">n</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">⊢!</span></a><a class="idref" href="PreciseFlow.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="PreciseFlow.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="InvertibleTyping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <a class="idref" href="InvertibleTyping.html#U'"><span class="id" title="variable">U'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#U'"><span class="id" title="variable">U'</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#rcd_mutind"><span class="id" title="definition">rcd_mutind</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="var">inversions</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">inversions</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">inversions</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">inversions</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">lets</span> <span class="id" title="var">Ht</span>: (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> (<a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a> <span class="id" title="var">H1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_all_invv"><span class="id" title="constructor">ty_all_invv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span>:=<span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H10</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="var">lets</span> <span class="id" title="var">Ho</span>: (<a class="idref" href="Replacement.html#repl_open_var"><span class="id" title="lemma">repl_open_var</span></a> <span class="id" title="var">y</span> <span class="id" title="var">H10</span> <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Weakening.html#weaken_subtyp"><span class="id" title="lemma">weaken_subtyp</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> (<a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a> <span class="id" title="var">H2</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hs</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Ho</span> <span class="id" title="var">Hs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_repl_sub</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="invertible_repl_closure_v"><span class="id" title="lemma">invertible_repl_closure_v</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">n</span> <span class="id" title="var">U</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#c729b3885afa1d7061374d5ce61505c2"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">{{</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#b7eed6717f16d4f74c0cd5066567c9a1"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#15e73e79cf9c7988d54eee7818527876"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="InvertibleTyping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="InvertibleTyping.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="InvertibleTyping.html#r"><span class="id" title="variable">r</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="InvertibleTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T'"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hqr</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hrep</span>. <span class="id" title="var">gen</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T'</span> <span class="id" title="var">n</span> <span class="id" title="var">U</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hv</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hrep</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_precise_invv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Ht</span>: (<a class="idref" href="PreciseFlow.html#pfv_inert"><span class="id" title="lemma">pfv_inert</span></a> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#invertible_repl_closure_v_helper"><span class="id" title="lemma">invertible_repl_closure_v_helper</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_all_invv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_all_invv"><span class="id" title="constructor">ty_all_invv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span>:=<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="TightTyping.html#subtyp_trans_t"><span class="id" title="constructor">subtyp_trans_t</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">T</span>:=<span class="id" title="var">S2</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Narrowing.html#narrow_subtyping"><span class="id" title="lemma">narrow_subtyping</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="TightTyping.html#tight_to_general"><span class="id" title="lemma">tight_to_general</span></a>. <span class="id" title="var">solve_repl_sub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_all_invv"><span class="id" title="constructor">ty_all_invv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span>:=<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a>. <span class="id" title="tactic">apply</span>× <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Replacement.html#repl_open_var"><span class="id" title="lemma">repl_open_var</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">solve_names</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_sngl_pq"><span class="id" title="constructor">subtyp_sngl_pq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hq</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_and_invv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_top_invv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_rec_pq_invv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="path_sel_inv_v"><span class="id" title="lemma">path_sel_inv_v</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">A</span> <span class="id" title="var">T</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#7feaab0acdb7971fc5e87ef040357882"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">{</span></a><a class="idref" href="InvertibleTyping.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#2488a084fbd7de5826afcd400cb581e2"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="Definitions.html#1567b6035e32564f35b85dde67cc70e6"><span class="id" title="notation">↓</span></a><a class="idref" href="InvertibleTyping.html#A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">:</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hv</span>. <span class="id" title="var">inversions</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##<span class="id" title="var">v</span></span> <span class="inlinecode"><span class="id" title="var">v</span>:</span> <span class="inlinecode"><span class="id" title="keyword">∀</span>(<span class="id" title="var">S</span>)<span class="id" title="var">T</span></span> then
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="tactic">∃</span></span> <span class="inlinecode"><span class="id" title="var">S'</span>,</span> <span class="inlinecode"><span class="id" title="var">T'</span>,</span> <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!</span> <span class="inlinecode"><span class="id" title="var">v</span>:</span> <span class="inlinecode"><span class="id" title="keyword">∀</span>(<span class="id" title="var">S'</span>)<span class="id" title="var">T'</span></span>,

</li>
<li> <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">S'</span></span>, and

</li>
<li> <span class="inlinecode"><span class="id" title="keyword">∀</span></span> <span class="inlinecode"><span class="id" title="tactic">fresh</span></span> <span class="inlinecode"><span class="id" title="var">y</span>,</span> <span class="inlinecode"><span class="id" title="var">G</span>,</span> <span class="inlinecode"><span class="id" title="var">y</span>:</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">T'</span>^<span class="id" title="var">y</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T</span>^<span class="id" title="var">y</span></span> 
</li>
</ul>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="invertible_val_to_precise_lambda"><span class="id" title="lemma">invertible_val_to_precise_lambda</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#aa0c42e24884fb769ec058827958e802"><span class="id" title="notation">∀(</span></a><a class="idref" href="InvertibleTyping.html#S"><span class="id" title="variable">S</span></a><a class="idref" href="Definitions.html#aa0c42e24884fb769ec058827958e802"><span class="id" title="notation">)</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">L</span> <span class="id" title="var">S'</span> <span class="id" title="var">T'</span><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">⊢!</span></a><a class="idref" href="PreciseFlow.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="PreciseFlow.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#aa0c42e24884fb769ec058827958e802"><span class="id" title="notation">∀(</span></a><a class="idref" href="InvertibleTyping.html#S'"><span class="id" title="variable">S'</span></a><a class="idref" href="Definitions.html#aa0c42e24884fb769ec058827958e802"><span class="id" title="notation">)</span></a> <a class="idref" href="InvertibleTyping.html#T'"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">⊢</span></a> <a class="idref" href="InvertibleTyping.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="InvertibleTyping.html#S'"><span class="id" title="variable">S'</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <span class="id" title="var">y</span>, <a class="idref" href="InvertibleTyping.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="InvertibleTyping.html#L"><span class="id" title="variable">L</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="InvertibleTyping.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="InvertibleTyping.html#S"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="InvertibleTyping.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="InvertibleTyping.html#T'"><span class="id" title="variable">T'</span></a> <a class="idref" href="Definitions.html#f5d99e17f5ca8d1d631e108ef40e0c62"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="InvertibleTyping.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Ht</span> <span class="id" title="var">Hg</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">∃</span> (<span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>) <span class="id" title="var">S</span> <span class="id" title="var">T</span>. <span class="id" title="tactic">split</span>×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHHt</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">Hg</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">L'</span> [<span class="id" title="var">S'</span> [<span class="id" title="var">T'</span> [<span class="id" title="var">Hp</span> [<span class="id" title="var">Hss</span> <span class="id" title="var">Hst</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">L'</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>) <span class="id" title="var">S'</span> <span class="id" title="var">T'</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">T</span>:=<span class="id" title="var">S1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="TightTyping.html#tight_to_general"><span class="id" title="lemma">tight_to_general</span></a>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="inductive">ok</span> (<span class="id" title="var">G</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">y</span> <span class="id" title="notation">~</span> <span class="id" title="var">S</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hok</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>× <span class="id" title="constructor">ok_push</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">T</span>:=<a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <span class="id" title="var">y</span> <span class="id" title="var">T1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="Narrowing.html#narrow_subtyping"><span class="id" title="lemma">narrow_subtyping</span></a>. <span class="id" title="tactic">apply</span>× <span class="id" title="var">Hst</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Subenvironments.html#subenv_last"><span class="id" title="lemma">subenv_last</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="TightTyping.html#tight_to_general"><span class="id" title="lemma">tight_to_general</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span>× <span class="id" title="var">H0</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If the invertible type of a value is a recursive type then its precise type
    is an equivalent recursive type. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="invertible_to_precise_obj"><span class="id" title="lemma">invertible_to_precise_obj</span></a> <span class="id" title="var">G</span> <span class="id" title="var">U</span> <span class="id" title="var">v</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="InvertibleTyping.html#84bceb36017ab69616575731d2f4c98e"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#77a356e00f708305a2c1675554d2ec98"><span class="id" title="notation">μ</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <span class="id" title="var">T</span><span class="id" title="notation">,</span> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">⊢!</span></a><a class="idref" href="PreciseFlow.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">v</span></a> <a class="idref" href="InvertibleTyping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="PreciseFlow.html#b3e599d6bf85393b061e848a96007841"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#77a356e00f708305a2c1675554d2ec98"><span class="id" title="notation">μ</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="InvertibleTyping.html#G"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#b7384b88c1af5dcf2d38b3c5a6389e24"><span class="id" title="notation">⊢</span></a> <a class="idref" href="InvertibleTyping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="PreciseTyping.html#b7384b88c1af5dcf2d38b3c5a6389e24"><span class="id" title="notation">⟿</span></a> <a class="idref" href="InvertibleTyping.html#U"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hv</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_precise_invv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>×. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_rec_pq_invv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHv</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">T'</span> [<span class="id" title="var">Hinv</span> <span class="id" title="var">Hrc</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="Sequences.html#star_trans"><span class="id" title="lemma">star_trans</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="Sequences.html#star_one"><span class="id" title="lemma">star_one</span></a>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hrc</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
